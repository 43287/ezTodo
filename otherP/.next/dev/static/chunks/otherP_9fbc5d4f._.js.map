{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,iPAAO,EAAC,IAAA,2MAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/context/todo-context.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useState, useEffect, type ReactNode } from \"react\"\n\nexport interface Todo {\n  id: string\n  title: string\n  description: string\n  completed: boolean\n  important: boolean\n  dueDate: string | null\n  createdAt: string\n  completedAt?: string // 添加完成时间记录\n  priority: \"low\" | \"medium\" | \"high\"\n  category: string\n  fromPlanId?: string\n}\n\nexport interface Plan {\n  id: string\n  title: string\n  description: string\n  repeatCycle: \"daily\" | \"weekly\" | \"monthly\"\n  planDays: number[]\n  startTime: string\n  endTime: string\n  repeatCount: number | null\n  currentCount: number\n  cycleTargetCount: number // 添加本周期目标完成次数\n  totalCompletedCount: number\n  lastResetDate: string\n  createdAt: string\n  category: string\n  active: boolean\n  important: boolean\n}\n\nexport interface HistoryRecord {\n  id: string\n  type: \"todo_created\" | \"todo_completed\" | \"plan_created\" | \"plan_completed\"\n  title: string\n  timestamp: string\n  itemId: string\n  itemType: \"todo\" | \"plan\"\n}\n\nexport interface Settings {\n  showCompleted: boolean\n  sortBy: \"date\" | \"priority\" | \"name\"\n  theme: \"dark\" | \"light\" | \"system\"\n  notifications: boolean\n  soundEnabled: boolean\n}\n\ninterface TodoContextType {\n  todos: Todo[]\n  plans: Plan[]\n  settings: Settings\n  history: HistoryRecord[]\n  addTodo: (todo: Omit<Todo, \"id\" | \"createdAt\">) => void\n  updateTodo: (id: string, updates: Partial<Todo>) => void\n  deleteTodo: (id: string) => void\n  toggleComplete: (id: string) => void\n  toggleImportant: (id: string) => void\n  updateSettings: (updates: Partial<Settings>) => void\n  addPlan: (plan: Omit<Plan, \"id\" | \"createdAt\" | \"currentCount\" | \"totalCompletedCount\" | \"lastResetDate\">) => void\n  updatePlan: (id: string, updates: Partial<Plan>) => void\n  deletePlan: (id: string) => void\n  togglePlanActive: (id: string) => void\n  togglePlanImportant: (id: string) => void\n  completePlanOnce: (id: string) => void\n  endPlan: (id: string) => void\n}\n\nconst TodoContext = createContext<TodoContextType | undefined>(undefined)\n\nconst defaultTodos: Todo[] = [\n  {\n    id: \"1\",\n    title: \"完成项目文档\",\n    description: \"编写项目的技术文档和用户手册\",\n    completed: false,\n    important: true,\n    dueDate: \"2025-11-27\",\n    createdAt: \"2025-11-25\",\n    priority: \"high\",\n    category: \"工作\",\n  },\n  {\n    id: \"2\",\n    title: \"代码审查\",\n    description: \"审查团队成员提交的代码\",\n    completed: false,\n    important: false,\n    dueDate: \"2025-11-26\",\n    createdAt: \"2025-11-25\",\n    priority: \"medium\",\n    category: \"工作\",\n  },\n  {\n    id: \"3\",\n    title: \"购买日用品\",\n    description: \"牛奶、面包、水果\",\n    completed: true,\n    important: false,\n    dueDate: null,\n    createdAt: \"2025-11-24\",\n    completedAt: \"2025-11-24\",\n    priority: \"low\",\n    category: \"生活\",\n  },\n]\n\nconst defaultPlans: Plan[] = [\n  {\n    id: \"plan-1\",\n    title: \"周末跑步\",\n    description: \"每周周末晚上跑步锻炼\",\n    repeatCycle: \"weekly\",\n    planDays: [6, 0],\n    startTime: \"20:00\",\n    endTime: \"21:00\",\n    repeatCount: null,\n    currentCount: 0,\n    cycleTargetCount: 2, // 添加默认周期目标完成次数\n    totalCompletedCount: 5,\n    lastResetDate: \"2025-11-24\",\n    createdAt: \"2025-11-20\",\n    category: \"健康\",\n    active: true,\n    important: false,\n  },\n]\n\nconst defaultHistory: HistoryRecord[] = [\n  {\n    id: \"h1\",\n    type: \"todo_created\",\n    title: \"完成项目文档\",\n    timestamp: \"2025-11-25T10:00:00\",\n    itemId: \"1\",\n    itemType: \"todo\",\n  },\n  {\n    id: \"h2\",\n    type: \"todo_completed\",\n    title: \"购买日用品\",\n    timestamp: \"2025-11-24T18:30:00\",\n    itemId: \"3\",\n    itemType: \"todo\",\n  },\n  {\n    id: \"h3\",\n    type: \"plan_created\",\n    title: \"周末跑步\",\n    timestamp: \"2025-11-20T09:00:00\",\n    itemId: \"plan-1\",\n    itemType: \"plan\",\n  },\n]\n\nconst defaultSettings: Settings = {\n  showCompleted: true,\n  sortBy: \"date\",\n  theme: \"dark\",\n  notifications: true,\n  soundEnabled: true,\n}\n\nfunction shouldResetPlan(plan: Plan): boolean {\n  const today = new Date()\n  const lastReset = new Date(plan.lastResetDate)\n\n  switch (plan.repeatCycle) {\n    case \"daily\":\n      return today.toDateString() !== lastReset.toDateString()\n    case \"weekly\":\n      const getWeekStart = (date: Date) => {\n        const d = new Date(date)\n        const day = d.getDay()\n        const diff = d.getDate() - day + (day === 0 ? -6 : 1)\n        return new Date(d.setDate(diff)).toDateString()\n      }\n      return getWeekStart(today) !== getWeekStart(lastReset)\n    case \"monthly\":\n      return today.getMonth() !== lastReset.getMonth() || today.getFullYear() !== lastReset.getFullYear()\n    default:\n      return false\n  }\n}\n\nfunction isTodayPlanDay(plan: Plan): boolean {\n  const today = new Date()\n  const dayOfWeek = today.getDay()\n  const dayOfMonth = today.getDate()\n\n  switch (plan.repeatCycle) {\n    case \"daily\":\n      return true\n    case \"weekly\":\n      return plan.planDays.includes(dayOfWeek)\n    case \"monthly\":\n      return plan.planDays.includes(dayOfMonth)\n    default:\n      return false\n  }\n}\n\nexport function TodoProvider({ children }: { children: ReactNode }) {\n  const [todos, setTodos] = useState<Todo[]>(defaultTodos)\n  const [plans, setPlans] = useState<Plan[]>(defaultPlans)\n  const [settings, setSettings] = useState<Settings>(defaultSettings)\n  const [history, setHistory] = useState<HistoryRecord[]>(defaultHistory)\n\n  const addHistoryRecord = (record: Omit<HistoryRecord, \"id\" | \"timestamp\">) => {\n    const newRecord: HistoryRecord = {\n      ...record,\n      id: `h-${crypto.randomUUID()}`,\n      timestamp: new Date().toISOString(),\n    }\n    setHistory((prev) => [newRecord, ...prev])\n  }\n\n  useEffect(() => {\n    const today = new Date().toISOString().split(\"T\")[0]\n\n    setPlans((prevPlans) =>\n      prevPlans.map((plan) => {\n        if (shouldResetPlan(plan)) {\n          return { ...plan, currentCount: 0, lastResetDate: today }\n        }\n        return plan\n      }),\n    )\n\n    plans.forEach((plan) => {\n      if (plan.active && isTodayPlanDay(plan)) {\n        const existingTodo = todos.find((t) => t.fromPlanId === plan.id && t.dueDate === today)\n        if (!existingTodo) {\n          const newTodo: Todo = {\n            id: `${plan.id}-${today}`,\n            title: plan.title,\n            description: `${plan.description}\\n时间: ${plan.startTime} - ${plan.endTime}`,\n            completed: false,\n            important: plan.important,\n            dueDate: today,\n            createdAt: today,\n            priority: \"medium\",\n            category: plan.category,\n            fromPlanId: plan.id,\n          }\n          setTodos((prev) => [newTodo, ...prev])\n        }\n      }\n    })\n  }, []) // eslint-disable-line react-hooks/exhaustive-deps\n\n  const addTodo = (todo: Omit<Todo, \"id\" | \"createdAt\">) => {\n    const newTodo: Todo = {\n      ...todo,\n      id: Date.now().toString(),\n      createdAt: new Date().toISOString().split(\"T\")[0],\n    }\n    setTodos((prev) => [newTodo, ...prev])\n    addHistoryRecord({\n      type: \"todo_created\",\n      title: todo.title,\n      itemId: newTodo.id,\n      itemType: \"todo\",\n    })\n  }\n\n  const updateTodo = (id: string, updates: Partial<Todo>) => {\n    setTodos((prev) => prev.map((todo) => (todo.id === id ? { ...todo, ...updates } : todo)))\n  }\n\n  const deleteTodo = (id: string) => {\n    setTodos((prev) => prev.filter((todo) => todo.id !== id))\n  }\n\n  const toggleComplete = (id: string) => {\n    setTodos((prev) =>\n      prev.map((todo) => {\n        if (todo.id === id) {\n          const newCompleted = !todo.completed\n          if (newCompleted) {\n            addHistoryRecord({\n              type: \"todo_completed\",\n              title: todo.title,\n              itemId: id,\n              itemType: \"todo\",\n            })\n            if (todo.fromPlanId) {\n              setPlans((prevPlans) =>\n                prevPlans.map((plan) =>\n                  plan.id === todo.fromPlanId\n                    ? {\n                        ...plan,\n                        currentCount: plan.currentCount + 1,\n                        totalCompletedCount: plan.totalCompletedCount + 1,\n                      }\n                    : plan,\n                ),\n              )\n              addHistoryRecord({\n                type: \"plan_completed\",\n                title: todo.title,\n                itemId: todo.fromPlanId,\n                itemType: \"plan\",\n              })\n            }\n          }\n          return {\n            ...todo,\n            completed: newCompleted,\n            completedAt: newCompleted ? new Date().toISOString() : undefined,\n          }\n        }\n        return todo\n      }),\n    )\n  }\n\n  const toggleImportant = (id: string) => {\n    setTodos((prev) => prev.map((todo) => (todo.id === id ? { ...todo, important: !todo.important } : todo)))\n  }\n\n  const updateSettings = (updates: Partial<Settings>) => {\n    setSettings((prev) => ({ ...prev, ...updates }))\n  }\n\n  const addPlan = (plan: Omit<Plan, \"id\" | \"createdAt\" | \"currentCount\" | \"totalCompletedCount\" | \"lastResetDate\">) => {\n    const today = new Date().toISOString().split(\"T\")[0]\n    const newPlan: Plan = {\n      ...plan,\n      id: `plan-${Date.now()}`,\n      createdAt: today,\n      currentCount: 0,\n      totalCompletedCount: 0,\n      lastResetDate: today,\n    }\n    setPlans((prev) => [newPlan, ...prev])\n    addHistoryRecord({\n      type: \"plan_created\",\n      title: plan.title,\n      itemId: newPlan.id,\n      itemType: \"plan\",\n    })\n  }\n\n  const updatePlan = (id: string, updates: Partial<Plan>) => {\n    setPlans((prev) => prev.map((plan) => (plan.id === id ? { ...plan, ...updates } : plan)))\n  }\n\n  const deletePlan = (id: string) => {\n    setPlans((prev) => prev.filter((plan) => plan.id !== id))\n    setTodos((prev) => prev.filter((todo) => todo.fromPlanId !== id))\n  }\n\n  const togglePlanActive = (id: string) => {\n    setPlans((prev) => prev.map((plan) => (plan.id === id ? { ...plan, active: !plan.active } : plan)))\n  }\n\n  const togglePlanImportant = (id: string) => {\n    setPlans((prev) => prev.map((plan) => (plan.id === id ? { ...plan, important: !plan.important } : plan)))\n  }\n\n  const completePlanOnce = (id: string) => {\n    setPlans((prev) =>\n      prev.map((plan) => {\n        if (plan.id === id) {\n          const newTotalCount = plan.totalCompletedCount + 1\n          const newCurrentCount = plan.currentCount + 1\n\n          addHistoryRecord({\n            type: \"plan_completed\",\n            title: plan.title,\n            itemId: id,\n            itemType: \"plan\",\n          })\n\n          if (plan.repeatCount && newTotalCount >= plan.repeatCount) {\n            return {\n              ...plan,\n              currentCount: newCurrentCount,\n              totalCompletedCount: newTotalCount,\n              active: false,\n            }\n          }\n\n          return {\n            ...plan,\n            currentCount: newCurrentCount,\n            totalCompletedCount: newTotalCount,\n          }\n        }\n        return plan\n      }),\n    )\n  }\n\n  const endPlan = (id: string) => {\n    setPlans((prev) =>\n      prev.map((plan) => {\n        if (plan.id === id) {\n          addHistoryRecord({\n            type: \"plan_completed\",\n            title: `${plan.title} (已结束)`,\n            itemId: id,\n            itemType: \"plan\",\n          })\n          return {\n            ...plan,\n            active: false,\n            repeatCount: plan.totalCompletedCount,\n          }\n        }\n        return plan\n      }),\n    )\n  }\n\n  return (\n    <TodoContext.Provider\n      value={{\n        todos,\n        plans,\n        settings,\n        history,\n        addTodo,\n        updateTodo,\n        deleteTodo,\n        toggleComplete,\n        toggleImportant,\n        updateSettings,\n        addPlan,\n        updatePlan,\n        deletePlan,\n        togglePlanActive,\n        togglePlanImportant,\n        completePlanOnce,\n        endPlan,\n      }}\n    >\n      {children}\n    </TodoContext.Provider>\n  )\n}\n\nexport function useTodo() {\n  const context = useContext(TodoContext)\n  if (!context) {\n    throw new Error(\"useTodo must be used within a TodoProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 435, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport { cn } from \"@/lib/utils\"\nimport type { View } from \"@/app/page\"\nimport { useTodo } from \"@/context/todo-context\"\nimport { LayoutList, Star, CheckCircle2, Settings, Clock } from \"lucide-react\"\n\ninterface SidebarProps {\n  currentView: View\n  onViewChange: (view: View) => void\n}\n\nconst navItems = [\n  { id: \"list\" as View, label: \"所有任务\", icon: LayoutList },\n  { id: \"important\" as View, label: \"重要\", icon: Star },\n  { id: \"completed\" as View, label: \"已完成\", icon: CheckCircle2 },\n  { id: \"history\" as View, label: \"历程\", icon: Clock },\n]\n\nexport function Sidebar({ currentView, onViewChange }: SidebarProps) {\n  const { todos, plans } = useTodo()\n\n  const getCounts = (view: View) => {\n    switch (view) {\n      case \"list\":\n        return todos.filter((t) => !t.completed).length + plans.filter((p) => p.active).length\n      case \"important\":\n        return (\n          todos.filter((t) => t.important && !t.completed).length + plans.filter((p) => p.important && p.active).length\n        )\n      case \"completed\":\n        return todos.filter((t) => t.completed).length\n      case \"history\":\n        return 0 // 历程不显示数量\n      default:\n        return 0\n    }\n  }\n\n  return (\n    <aside className=\"w-64 bg-sidebar border-r border-sidebar-border flex flex-col\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-sidebar-border\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center\">\n            <CheckCircle2 className=\"w-5 h-5 text-primary\" />\n          </div>\n          <div>\n            <h1 className=\"font-semibold text-sidebar-foreground\">Todo List</h1>\n            <p className=\"text-xs text-muted-foreground\">任务管理</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 p-2 space-y-1\">\n        {navItems.map((item) => {\n          const Icon = item.icon\n          const count = getCounts(item.id)\n          const isActive = currentView === item.id\n\n          return (\n            <button\n              key={item.id}\n              onClick={() => onViewChange(item.id)}\n              className={cn(\n                \"w-full flex items-center justify-between px-3 py-2.5 rounded-md text-sm transition-colors\",\n                isActive\n                  ? \"bg-sidebar-accent text-sidebar-foreground\"\n                  : \"text-muted-foreground hover:bg-sidebar-accent/50 hover:text-sidebar-foreground\",\n              )}\n            >\n              <div className=\"flex items-center gap-3\">\n                <Icon className={cn(\"w-4 h-4\", isActive && \"text-primary\")} />\n                <span>{item.label}</span>\n              </div>\n              {count > 0 && (\n                <span\n                  className={cn(\n                    \"text-xs px-2 py-0.5 rounded-full\",\n                    isActive ? \"bg-primary text-primary-foreground\" : \"bg-muted text-muted-foreground\",\n                  )}\n                >\n                  {count}\n                </span>\n              )}\n            </button>\n          )\n        })}\n      </nav>\n\n      {/* Settings */}\n      <div className=\"p-2 border-t border-sidebar-border\">\n        <button\n          onClick={() => onViewChange(\"settings\")}\n          className={cn(\n            \"w-full flex items-center gap-3 px-3 py-2.5 rounded-md text-sm transition-colors\",\n            currentView === \"settings\"\n              ? \"bg-sidebar-accent text-sidebar-foreground\"\n              : \"text-muted-foreground hover:bg-sidebar-accent/50 hover:text-sidebar-foreground\",\n          )}\n        >\n          <Settings className={cn(\"w-4 h-4\", currentView === \"settings\" && \"text-primary\")} />\n          <span>设置</span>\n        </button>\n      </div>\n    </aside>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;;;AALA;;;;AAYA,MAAM,WAAW;IACf;QAAE,IAAI;QAAgB,OAAO;QAAQ,MAAM,iUAAU;IAAC;IACtD;QAAE,IAAI;QAAqB,OAAO;QAAM,MAAM,2SAAI;IAAC;IACnD;QAAE,IAAI;QAAqB,OAAO;QAAO,MAAM,sUAAY;IAAC;IAC5D;QAAE,IAAI;QAAmB,OAAO;QAAM,MAAM,8SAAK;IAAC;CACnD;AAEM,SAAS,QAAQ,EAAE,WAAW,EAAE,YAAY,EAAgB;;IACjE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,IAAA,mJAAO;IAEhC,MAAM,YAAY,CAAC;QACjB,OAAQ;YACN,KAAK;gBACH,OAAO,MAAM,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,SAAS,EAAE,MAAM,GAAG,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,EAAE,MAAM;YACxF,KAAK;gBACH,OACE,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,IAAI,CAAC,EAAE,SAAS,EAAE,MAAM,GAAG,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,IAAI,EAAE,MAAM,EAAE,MAAM;YAEjH,KAAK;gBACH,OAAO,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;YAChD,KAAK;gBACH,OAAO,EAAE,UAAU;;YACrB;gBACE,OAAO;QACX;IACF;IAEA,qBACE,sUAAC;QAAM,WAAU;;0BAEf,sUAAC;gBAAI,WAAU;0BACb,cAAA,sUAAC;oBAAI,WAAU;;sCACb,sUAAC;4BAAI,WAAU;sCACb,cAAA,sUAAC,sUAAY;gCAAC,WAAU;;;;;;;;;;;sCAE1B,sUAAC;;8CACC,sUAAC;oCAAG,WAAU;8CAAwC;;;;;;8CACtD,sUAAC;oCAAE,WAAU;8CAAgC;;;;;;;;;;;;;;;;;;;;;;;0BAMnD,sUAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC;oBACb,MAAM,OAAO,KAAK,IAAI;oBACtB,MAAM,QAAQ,UAAU,KAAK,EAAE;oBAC/B,MAAM,WAAW,gBAAgB,KAAK,EAAE;oBAExC,qBACE,sUAAC;wBAEC,SAAS,IAAM,aAAa,KAAK,EAAE;wBACnC,WAAW,IAAA,+HAAE,EACX,6FACA,WACI,8CACA;;0CAGN,sUAAC;gCAAI,WAAU;;kDACb,sUAAC;wCAAK,WAAW,IAAA,+HAAE,EAAC,WAAW,YAAY;;;;;;kDAC3C,sUAAC;kDAAM,KAAK,KAAK;;;;;;;;;;;;4BAElB,QAAQ,mBACP,sUAAC;gCACC,WAAW,IAAA,+HAAE,EACX,oCACA,WAAW,uCAAuC;0CAGnD;;;;;;;uBApBA,KAAK,EAAE;;;;;gBAyBlB;;;;;;0BAIF,sUAAC;gBAAI,WAAU;0BACb,cAAA,sUAAC;oBACC,SAAS,IAAM,aAAa;oBAC5B,WAAW,IAAA,+HAAE,EACX,mFACA,gBAAgB,aACZ,8CACA;;sCAGN,sUAAC,uTAAQ;4BAAC,WAAW,IAAA,+HAAE,EAAC,WAAW,gBAAgB,cAAc;;;;;;sCACjE,sUAAC;sCAAK;;;;;;;;;;;;;;;;;;;;;;;AAKhB;GAzFgB;;QACW,mJAAO;;;KADlB"}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/lib/constants.ts"],"sourcesContent":["// 星期常量\nexport const WEEK_DAYS = [\n  { value: 0, label: \"周日\" },\n  { value: 1, label: \"周一\" },\n  { value: 2, label: \"周二\" },\n  { value: 3, label: \"周三\" },\n  { value: 4, label: \"周四\" },\n  { value: 5, label: \"周五\" },\n  { value: 6, label: \"周六\" },\n] as const\n\nexport const WEEK_DAY_LABELS = [\"周日\", \"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\"] as const\n\n// 月份日期常量\nexport const MONTH_DAYS = Array.from({ length: 31 }, (_, i) => ({ value: i + 1, label: `${i + 1}日` }))\n\n// 重复周期标签\nexport const CYCLE_LABELS: Record<string, string> = {\n  daily: \"每天\",\n  weekly: \"每周\",\n  monthly: \"每月\",\n}\n\n// 优先级配置\nexport const PRIORITY_CONFIG = {\n  high: { color: \"bg-destructive\", label: \"高优先级\" },\n  medium: { color: \"bg-yellow-500\", label: \"中优先级\" },\n  low: { color: \"bg-muted-foreground\", label: \"低优先级\" },\n} as const\n\n// 紧迫度样式配置\nexport const URGENCY_STYLES = {\n  overdue: {\n    border: \"border-l-4 border-l-red-500\",\n    bg: \"bg-red-500/5\",\n    badge: \"bg-red-500/20 text-red-400\",\n    label: \"已过期\",\n  },\n  urgent: {\n    border: \"border-l-4 border-l-orange-500\",\n    bg: \"bg-orange-500/5\",\n    badge: \"bg-orange-500/20 text-orange-400\",\n    label: \"今天到期\",\n  },\n  soon: {\n    border: \"border-l-4 border-l-yellow-500\",\n    bg: \"bg-yellow-500/5\",\n    badge: \"bg-yellow-500/20 text-yellow-400\",\n    label: \"即将到期\",\n  },\n  normal: {\n    border: \"border-l-4 border-l-blue-500/50\",\n    bg: \"\",\n    badge: \"bg-blue-500/20 text-blue-400\",\n    label: \"\",\n  },\n  none: {\n    border: \"\",\n    bg: \"\",\n    badge: \"\",\n    label: \"\",\n  },\n} as const\n\n// 分类选项\nexport const CATEGORIES = [\"工作\", \"生活\", \"健康\", \"学习\"] as const\n"],"names":[],"mappings":"AAAA,OAAO;;;;;;;;;;;;;;;;;AACA,MAAM,YAAY;IACvB;QAAE,OAAO;QAAG,OAAO;IAAK;IACxB;QAAE,OAAO;QAAG,OAAO;IAAK;IACxB;QAAE,OAAO;QAAG,OAAO;IAAK;IACxB;QAAE,OAAO;QAAG,OAAO;IAAK;IACxB;QAAE,OAAO;QAAG,OAAO;IAAK;IACxB;QAAE,OAAO;QAAG,OAAO;IAAK;IACxB;QAAE,OAAO;QAAG,OAAO;IAAK;CACzB;AAEM,MAAM,kBAAkB;IAAC;IAAM;IAAM;IAAM;IAAM;IAAM;IAAM;CAAK;AAGlE,MAAM,aAAa,MAAM,IAAI,CAAC;IAAE,QAAQ;AAAG,GAAG,CAAC,GAAG,IAAM,CAAC;QAAE,OAAO,IAAI;QAAG,OAAO,GAAG,IAAI,EAAE,CAAC,CAAC;IAAC,CAAC;AAG7F,MAAM,eAAuC;IAClD,OAAO;IACP,QAAQ;IACR,SAAS;AACX;AAGO,MAAM,kBAAkB;IAC7B,MAAM;QAAE,OAAO;QAAkB,OAAO;IAAO;IAC/C,QAAQ;QAAE,OAAO;QAAiB,OAAO;IAAO;IAChD,KAAK;QAAE,OAAO;QAAuB,OAAO;IAAO;AACrD;AAGO,MAAM,iBAAiB;IAC5B,SAAS;QACP,QAAQ;QACR,IAAI;QACJ,OAAO;QACP,OAAO;IACT;IACA,QAAQ;QACN,QAAQ;QACR,IAAI;QACJ,OAAO;QACP,OAAO;IACT;IACA,MAAM;QACJ,QAAQ;QACR,IAAI;QACJ,OAAO;QACP,OAAO;IACT;IACA,QAAQ;QACN,QAAQ;QACR,IAAI;QACJ,OAAO;QACP,OAAO;IACT;IACA,MAAM;QACJ,QAAQ;QACR,IAAI;QACJ,OAAO;QACP,OAAO;IACT;AACF;AAGO,MAAM,aAAa;IAAC;IAAM;IAAM;IAAM;CAAK"}},
    {"offset": {"line": 782, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/todo-item.tsx"],"sourcesContent":["\"use client\"\n\nimport { cn } from \"@/lib/utils\"\nimport { type Todo, useTodo } from \"@/context/todo-context\"\nimport { Star, Calendar, Trash2, AlertCircle, Clock, Repeat, CheckCircle2, Circle } from \"lucide-react\"\nimport { URGENCY_STYLES } from \"@/lib/constants\"\nimport type { UrgencyLevel } from \"@/lib/utils/date\"\n\ninterface TodoItemProps {\n  todo: Todo\n  onEdit: (id: string) => void\n  isSelected: boolean\n  urgency: UrgencyLevel\n}\n\nconst urgencyIcons = {\n  overdue: AlertCircle,\n  urgent: AlertCircle,\n  soon: Clock,\n  normal: Calendar,\n  none: Calendar,\n}\n\nexport function TodoItem({ todo, onEdit, isSelected, urgency }: TodoItemProps) {\n  const { toggleComplete, toggleImportant, deleteTodo } = useTodo()\n\n  const urgencyStyle = URGENCY_STYLES[urgency]\n  const UrgencyIcon = urgencyIcons[urgency]\n  const isFromPlan = !!todo.fromPlanId\n\n  return (\n    <div\n      className={cn(\n        \"group flex items-start gap-3 p-3 rounded-lg border cursor-pointer\",\n        \"transition-all duration-200 ease-out\",\n        !todo.completed && isFromPlan && \"border-l-4 border-l-violet-500\",\n        !todo.completed && !isFromPlan && urgencyStyle.border,\n        !todo.completed && urgencyStyle.bg,\n        isSelected\n          ? \"bg-card border-primary/50 scale-[1.01] shadow-md shadow-primary/5\"\n          : \"bg-card/50 border-border hover:bg-card hover:border-border hover:scale-[1.005]\",\n        todo.completed && \"opacity-60\",\n      )}\n      onClick={() => onEdit(todo.id)}\n    >\n      <div\n        className={cn(\n          \"mt-0.5 w-8 h-8 rounded-full flex items-center justify-center shrink-0 transition-colors\",\n          todo.completed\n            ? \"bg-green-500/20 text-green-400\"\n            : isFromPlan\n              ? \"bg-violet-500/20 text-violet-400\"\n              : urgency === \"overdue\" || urgency === \"urgent\"\n                ? \"bg-destructive/20 text-destructive\"\n                : urgency === \"soon\"\n                  ? \"bg-yellow-500/20 text-yellow-500\"\n                  : \"bg-primary/20 text-primary\",\n        )}\n      >\n        {todo.completed ? (\n          <CheckCircle2 className=\"w-4 h-4\" />\n        ) : isFromPlan ? (\n          <Repeat className=\"w-4 h-4\" />\n        ) : (\n          <Circle className=\"w-4 h-4\" />\n        )}\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-center gap-2\">\n          <p\n            className={cn(\n              \"text-sm font-medium truncate transition-all duration-300\",\n              todo.completed && \"line-through text-muted-foreground\",\n            )}\n          >\n            {todo.title}\n          </p>\n          {isFromPlan && (\n            <span className=\"shrink-0 flex items-center gap-1 text-xs px-1.5 py-0.5 rounded-full bg-violet-500/20 text-violet-400\">\n              <Repeat className=\"w-3 h-3\" />\n              计划\n            </span>\n          )}\n        </div>\n        {todo.description && <p className=\"text-sm text-muted-foreground mt-1 line-clamp-1\">{todo.description}</p>}\n        <div className=\"flex items-center gap-2 mt-1 flex-wrap\">\n          {todo.dueDate && (\n            <span\n              className={cn(\n                \"flex items-center gap-1 text-xs px-1.5 py-0.5 rounded\",\n                !todo.completed && urgency !== \"none\" && urgency !== \"normal\"\n                  ? urgencyStyle.badge\n                  : \"text-muted-foreground\",\n              )}\n            >\n              <UrgencyIcon className=\"w-3 h-3\" />\n              {urgencyStyle.label && !todo.completed && <span className=\"font-medium\">{urgencyStyle.label}</span>}\n              <span>{todo.dueDate}</span>\n            </span>\n          )}\n          {todo.category && (\n            <span className=\"text-xs px-2 py-0.5 rounded-full bg-secondary text-secondary-foreground\">\n              {todo.category}\n            </span>\n          )}\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-1\">\n        <span\n          className={cn(\"w-2 h-2 rounded-full transition-all duration-300\", {\n            \"bg-destructive animate-pulse\": todo.priority === \"high\",\n            \"bg-yellow-500\": todo.priority === \"medium\",\n            \"bg-muted-foreground\": todo.priority === \"low\",\n          })}\n          title={`优先级: ${todo.priority === \"high\" ? \"高\" : todo.priority === \"medium\" ? \"中\" : \"低\"}`}\n        />\n\n        {/* 完成按钮 - 和计划一致的UI */}\n        {!todo.completed && (\n          <button\n            onClick={(e) => {\n              e.stopPropagation()\n              toggleComplete(todo.id)\n            }}\n            className=\"p-1.5 rounded-md transition-all duration-200 text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-green-400 hover:bg-green-400/10 hover:scale-110\"\n            title=\"完成任务\"\n          >\n            <CheckCircle2 className=\"w-4 h-4\" />\n          </button>\n        )}\n\n        <button\n          onClick={(e) => {\n            e.stopPropagation()\n            toggleImportant(todo.id)\n          }}\n          className={cn(\n            \"p-1.5 rounded-md transition-all duration-200\",\n            todo.important\n              ? \"text-yellow-500 scale-100\"\n              : \"text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-yellow-500 hover:scale-110\",\n          )}\n        >\n          <Star\n            className={cn(\"w-4 h-4 transition-transform duration-200\", todo.important && \"fill-current scale-110\")}\n          />\n        </button>\n\n        <button\n          onClick={(e) => {\n            e.stopPropagation()\n            deleteTodo(todo.id)\n          }}\n          className=\"p-1.5 rounded-md text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-destructive hover:scale-110 transition-all duration-200\"\n        >\n          <Trash2 className=\"w-4 h-4\" />\n        </button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1045, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/plan-item.tsx"],"sourcesContent":["\"use client\"\n\nimport { cn } from \"@/lib/utils\"\nimport type { Plan } from \"@/context/todo-context\"\nimport { useTodo } from \"@/context/todo-context\"\nimport { Repeat, Clock, Calendar, Power, Star, CheckCircle2 } from \"lucide-react\"\nimport { CYCLE_LABELS, WEEK_DAY_LABELS } from \"@/lib/constants\"\n\ninterface PlanItemProps {\n  plan: Plan\n  onEdit: (id: string) => void\n  isSelected: boolean\n}\n\nexport function PlanItem({ plan, onEdit, isSelected }: PlanItemProps) {\n  const { togglePlanActive, togglePlanImportant, completePlanOnce } = useTodo()\n\n  const getPlanDaysLabel = () => {\n    if (plan.repeatCycle === \"daily\") return \"每天\"\n    if (plan.repeatCycle === \"weekly\") {\n      return plan.planDays.map((d) => WEEK_DAY_LABELS[d]).join(\"、\")\n    }\n    return plan.planDays.map((d) => `${d}日`).join(\"、\")\n  }\n\n  const isPlanEnded = plan.repeatCount && plan.totalCompletedCount >= plan.repeatCount\n  const isCycleCompleted = plan.currentCount >= plan.cycleTargetCount\n\n  return (\n    <div\n      className={cn(\n        \"group p-4 rounded-lg border transition-all duration-200 cursor-pointer\",\n        \"hover:scale-[1.01] hover:shadow-md\",\n        isSelected\n          ? \"border-primary bg-primary/5 shadow-lg scale-[1.02]\"\n          : \"border-border bg-card hover:border-primary/50\",\n        (!plan.active || isPlanEnded) && \"opacity-50\",\n        isCycleCompleted && plan.active && !isPlanEnded && \"border-emerald-500/50 bg-emerald-500/5\",\n      )}\n      onClick={() => onEdit(plan.id)}\n    >\n      <div className=\"flex items-start gap-3\">\n        {/* Plan Icon */}\n        <div\n          className={cn(\n            \"mt-0.5 w-8 h-8 rounded-full flex items-center justify-center transition-colors\",\n            isPlanEnded\n              ? \"bg-green-500/20 text-green-400\"\n              : isCycleCompleted\n                ? \"bg-emerald-500/20 text-emerald-400\"\n                : plan.active\n                  ? \"bg-violet-500/20 text-violet-400\"\n                  : \"bg-muted text-muted-foreground\",\n          )}\n        >\n          {isPlanEnded || isCycleCompleted ? <CheckCircle2 className=\"w-4 h-4\" /> : <Repeat className=\"w-4 h-4\" />}\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2\">\n            <h3\n              className={cn(\n                \"font-medium text-foreground truncate\",\n                (!plan.active || isPlanEnded) && \"text-muted-foreground\",\n              )}\n            >\n              {plan.title}\n            </h3>\n            <span\n              className={cn(\n                \"shrink-0 text-xs px-2 py-0.5 rounded-full\",\n                isPlanEnded\n                  ? \"bg-green-500/20 text-green-400\"\n                  : isCycleCompleted\n                    ? \"bg-emerald-500/20 text-emerald-400\"\n                    : \"bg-violet-500/20 text-violet-400\",\n              )}\n            >\n              {isPlanEnded ? \"已完成\" : isCycleCompleted ? \"本周期完成\" : \"计划\"}\n            </span>\n          </div>\n\n          {plan.description && <p className=\"text-sm text-muted-foreground mt-1 line-clamp-1\">{plan.description}</p>}\n\n          {/* Plan Details */}\n          <div className=\"flex flex-wrap items-center gap-3 mt-2 text-xs text-muted-foreground\">\n            <div className=\"flex items-center gap-1\">\n              <Calendar className=\"w-3 h-3\" />\n              <span>{CYCLE_LABELS[plan.repeatCycle]}</span>\n              <span className=\"text-violet-400\">{getPlanDaysLabel()}</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <Clock className=\"w-3 h-3\" />\n              <span>\n                {plan.startTime} - {plan.endTime}\n              </span>\n            </div>\n            <span className={cn(isCycleCompleted ? \"text-emerald-400\" : \"text-violet-400\")}>\n              本周期 {plan.currentCount}/{plan.cycleTargetCount}\n            </span>\n            <span className={cn(plan.repeatCount ? \"text-amber-400\" : \"text-green-400\")}>\n              总计 {plan.totalCompletedCount} 次{plan.repeatCount && ` / ${plan.repeatCount}`}\n            </span>\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex items-center gap-1\">\n          {plan.active && !isPlanEnded && (\n            <button\n              onClick={(e) => {\n                e.stopPropagation()\n                if (!isCycleCompleted) {\n                  completePlanOnce(plan.id)\n                }\n              }}\n              disabled={isCycleCompleted}\n              className={cn(\n                \"p-1.5 rounded-md transition-all duration-200\",\n                isCycleCompleted\n                  ? \"text-emerald-400 opacity-100 cursor-default\"\n                  : \"text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-green-400 hover:bg-green-400/10 hover:scale-110\",\n              )}\n              title={isCycleCompleted ? \"本周期已完成\" : \"完成本次\"}\n            >\n              <CheckCircle2 className=\"w-4 h-4\" />\n            </button>\n          )}\n\n          <button\n            onClick={(e) => {\n              e.stopPropagation()\n              togglePlanImportant(plan.id)\n            }}\n            className={cn(\n              \"p-1.5 rounded-md transition-all duration-200\",\n              plan.important\n                ? \"text-yellow-500 scale-100\"\n                : \"text-muted-foreground opacity-0 group-hover:opacity-100 hover:text-yellow-500 hover:scale-110\",\n            )}\n          >\n            <Star\n              className={cn(\"w-4 h-4 transition-transform duration-200\", plan.important && \"fill-current scale-110\")}\n            />\n          </button>\n\n          {!isPlanEnded && (\n            <button\n              onClick={(e) => {\n                e.stopPropagation()\n                togglePlanActive(plan.id)\n              }}\n              className={cn(\n                \"p-2 rounded-md transition-all duration-200\",\n                plan.active ? \"text-green-400 hover:bg-green-400/10\" : \"text-muted-foreground hover:bg-muted\",\n              )}\n              title={plan.active ? \"暂停计划\" : \"启用计划\"}\n            >\n              <Power className=\"w-4 h-4\" />\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1334, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,sUAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,+HAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 1365, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/lib/utils/date.ts"],"sourcesContent":["export type UrgencyLevel = \"overdue\" | \"urgent\" | \"soon\" | \"normal\" | \"none\"\n\n/**\n * 计算截止日期的紧迫程度\n */\nexport function getUrgencyLevel(dueDate: string | null): UrgencyLevel {\n  if (!dueDate) return \"none\"\n\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n  const due = new Date(dueDate)\n  due.setHours(0, 0, 0, 0)\n\n  const diffDays = Math.ceil((due.getTime() - today.getTime()) / (1000 * 60 * 60 * 24))\n\n  if (diffDays < 0) return \"overdue\"\n  if (diffDays === 0) return \"urgent\"\n  if (diffDays <= 2) return \"soon\"\n  return \"normal\"\n}\n\n/**\n * 格式化日期为 YYYY-MM-DD\n */\nexport function formatDate(date: Date = new Date()): string {\n  return date.toISOString().split(\"T\")[0]\n}\n\n/**\n * 格式化时间戳为可读格式\n */\nexport function formatTimestamp(timestamp: string): string {\n  const date = new Date(timestamp)\n  return `${date.getMonth() + 1}月${date.getDate()}日 ${date.getHours().toString().padStart(2, \"0\")}:${date.getMinutes().toString().padStart(2, \"0\")}`\n}\n\n/**\n * 按日期分组\n */\nexport function groupByDate<T extends { timestamp: string }>(items: T[]): Record<string, T[]> {\n  return items.reduce((acc: Record<string, T[]>, item) => {\n    const date = item.timestamp.split(\"T\")[0]\n    if (!acc[date]) acc[date] = []\n    acc[date].push(item)\n    return acc\n  }, {})\n}\n\n/**\n * 格式化分组日期标题\n */\nexport function formatDateLabel(dateStr: string): string {\n  const date = new Date(dateStr)\n  const today = new Date()\n  const yesterday = new Date(today)\n  yesterday.setDate(yesterday.getDate() - 1)\n\n  if (dateStr === formatDate(today)) return \"今天\"\n  if (dateStr === formatDate(yesterday)) return \"昨天\"\n  return `${date.getMonth() + 1}月${date.getDate()}日`\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAKO,SAAS,gBAAgB,OAAsB;IACpD,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,QAAQ,IAAI;IAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;IACxB,MAAM,MAAM,IAAI,KAAK;IACrB,IAAI,QAAQ,CAAC,GAAG,GAAG,GAAG;IAEtB,MAAM,WAAW,KAAK,IAAI,CAAC,CAAC,IAAI,OAAO,KAAK,MAAM,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;IAEnF,IAAI,WAAW,GAAG,OAAO;IACzB,IAAI,aAAa,GAAG,OAAO;IAC3B,IAAI,YAAY,GAAG,OAAO;IAC1B,OAAO;AACT;AAKO,SAAS,WAAW,OAAa,IAAI,MAAM;IAChD,OAAO,KAAK,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;AACzC;AAKO,SAAS,gBAAgB,SAAiB;IAC/C,MAAM,OAAO,IAAI,KAAK;IACtB,OAAO,GAAG,KAAK,QAAQ,KAAK,EAAE,CAAC,EAAE,KAAK,OAAO,GAAG,EAAE,EAAE,KAAK,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,KAAK,UAAU,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;AACpJ;AAKO,SAAS,YAA6C,KAAU;IACrE,OAAO,MAAM,MAAM,CAAC,CAAC,KAA0B;QAC7C,MAAM,OAAO,KAAK,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;QACzC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,GAAG,EAAE;QAC9B,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC;QACf,OAAO;IACT,GAAG,CAAC;AACN;AAKO,SAAS,gBAAgB,OAAe;IAC7C,MAAM,OAAO,IAAI,KAAK;IACtB,MAAM,QAAQ,IAAI;IAClB,MAAM,YAAY,IAAI,KAAK;IAC3B,UAAU,OAAO,CAAC,UAAU,OAAO,KAAK;IAExC,IAAI,YAAY,WAAW,QAAQ,OAAO;IAC1C,IAAI,YAAY,WAAW,YAAY,OAAO;IAC9C,OAAO,GAAG,KAAK,QAAQ,KAAK,EAAE,CAAC,EAAE,KAAK,OAAO,GAAG,CAAC,CAAC;AACpD"}},
    {"offset": {"line": 1420, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/todo-list.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useMemo } from \"react\"\nimport type { View } from \"@/app/page\"\nimport { useTodo } from \"@/context/todo-context\"\nimport { TodoItem } from \"./todo-item\"\nimport { PlanItem } from \"./plan-item\"\nimport { Input } from \"@/components/ui/input\"\nimport { Plus, Search, Pause, CheckCircle2, ListTodo } from \"lucide-react\"\nimport { getUrgencyLevel } from \"@/lib/utils/date\"\n\ninterface TodoListProps {\n  view: View\n  onEditTodo: (id: string) => void\n  onEditPlan: (id: string) => void\n  editingTodoId: string | null\n  editingPlanId: string | null\n  onToggleCreate: () => void\n  isCreating: boolean\n}\n\nconst VIEW_TITLES: Record<View, string> = {\n  list: \"所有任务\",\n  important: \"重要\",\n  completed: \"已完成\",\n  history: \"历程\",\n  settings: \"设置\",\n}\n\nexport function TodoList({\n  view,\n  onEditTodo,\n  onEditPlan,\n  editingTodoId,\n  editingPlanId,\n  onToggleCreate,\n  isCreating,\n}: TodoListProps) {\n  const { todos, plans, settings } = useTodo()\n  const [searchQuery, setSearchQuery] = useState(\"\")\n\n  const { activeItems, pausedPlans, completedItems, cycleCompletedPlans } = useMemo(() => {\n    const filterBySearch = <T extends { title: string; description: string }>(items: T[]) => {\n      if (!searchQuery) return items\n      const query = searchQuery.toLowerCase()\n      return items.filter(\n        (item) => item.title.toLowerCase().includes(query) || item.description.toLowerCase().includes(query),\n      )\n    }\n\n    let filteredTodos = filterBySearch([...todos])\n    let filteredPlans = filterBySearch([...plans])\n\n    if (view === \"important\") {\n      filteredTodos = filteredTodos.filter((t) => t.important)\n      filteredPlans = filteredPlans.filter((p) => p.important)\n    }\n\n    const sortTodos = (items: typeof todos) => {\n      const sortFns: Record<string, (a: (typeof items)[0], b: (typeof items)[0]) => number> = {\n        priority: (a, b) => {\n          const order = { high: 0, medium: 1, low: 2 }\n          return order[a.priority] - order[b.priority]\n        },\n        name: (a, b) => a.title.localeCompare(b.title),\n        date: (a, b) => {\n          if (!a.dueDate && !b.dueDate) return 0\n          if (!a.dueDate) return 1\n          if (!b.dueDate) return -1\n          return new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime()\n        },\n      }\n      return items.sort(sortFns[settings.sortBy] || sortFns.date)\n    }\n\n    const activeTodos = sortTodos(filteredTodos.filter((t) => !t.completed))\n\n    const activePlans = filteredPlans.filter((p) => p.active && p.currentCount < p.cycleTargetCount)\n\n    const cycleCompletedPlans = filteredPlans.filter((p) => p.active && p.currentCount >= p.cycleTargetCount)\n\n    const activeItems: Array<{ type: \"todo\" | \"plan\"; data: (typeof todos)[0] | (typeof plans)[0] }> = [\n      ...activeTodos.map((t) => ({ type: \"todo\" as const, data: t })),\n      ...activePlans.map((p) => ({ type: \"plan\" as const, data: p })),\n    ]\n\n    const pausedPlans = filteredPlans.filter(\n      (p) => !p.active && !(p.repeatCount !== null && p.totalCompletedCount >= p.repeatCount),\n    )\n\n    const completedTodos = sortTodos(filteredTodos.filter((t) => t.completed))\n    const permanentlyCompletedPlans = filteredPlans.filter(\n      (p) => p.repeatCount !== null && p.totalCompletedCount >= p.repeatCount,\n    )\n\n    const completedItems: Array<{ type: \"todo\" | \"plan\"; data: (typeof todos)[0] | (typeof plans)[0] }> = [\n      ...completedTodos.map((t) => ({ type: \"todo\" as const, data: t })),\n      ...permanentlyCompletedPlans.map((p) => ({ type: \"plan\" as const, data: p })),\n    ]\n\n    return { activeItems, pausedPlans, completedItems, cycleCompletedPlans }\n  }, [todos, plans, searchQuery, view, settings.sortBy])\n\n  return (\n    <div className=\"flex-1 flex flex-col bg-background\">\n      {/* Header */}\n      <header className=\"px-6 pt-2 pb-4 border-b border-border\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h2 className=\"text-2xl font-semibold text-foreground\">{VIEW_TITLES[view]}</h2>\n        </div>\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"搜索任务或计划...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-10 bg-input border-border transition-all duration-200 focus:scale-[1.01] focus:shadow-md\"\n          />\n        </div>\n      </header>\n\n      {view !== \"completed\" && (\n        <div className=\"px-6 py-3 border-b border-border\">\n          <button\n            onClick={onToggleCreate}\n            className={`flex items-center gap-2 transition-all duration-200 group ${\n              isCreating ? \"text-destructive hover:text-destructive/80\" : \"text-primary hover:text-primary/80\"\n            }`}\n          >\n            <Plus\n              className={`w-5 h-5 transition-transform duration-300 ${\n                isCreating ? \"rotate-45\" : \"group-hover:rotate-90\"\n              }`}\n            />\n            <span>{isCreating ? \"取消添加\" : \"添加任务/计划\"}</span>\n          </button>\n        </div>\n      )}\n\n      {/* Content List */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-6\">\n        {activeItems.length === 0 &&\n        pausedPlans.length === 0 &&\n        completedItems.length === 0 &&\n        cycleCompletedPlans.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center h-full text-muted-foreground\">\n            <p className=\"text-lg\">暂无内容</p>\n            <p className=\"text-sm\">点击上方按钮添加新任务或计划</p>\n          </div>\n        ) : (\n          <>\n            {/* Active Section */}\n            {view !== \"completed\" && activeItems.length > 0 && (\n              <ListSection\n                icon={<ListTodo className=\"w-4 h-4 text-primary\" />}\n                title=\"进行中\"\n                count={activeItems.length}\n                colorClass=\"text-primary bg-primary/20\"\n              >\n                {activeItems.map((item, index) => (\n                  <div\n                    key={item.data.id}\n                    className=\"animate-in fade-in slide-in-from-left-2 duration-300\"\n                    style={{ animationDelay: `${index * 50}ms` }}\n                  >\n                    {item.type === \"todo\" ? (\n                      <TodoItem\n                        todo={item.data as (typeof todos)[0]}\n                        onEdit={onEditTodo}\n                        isSelected={editingTodoId === item.data.id}\n                        urgency={getUrgencyLevel((item.data as (typeof todos)[0]).dueDate)}\n                      />\n                    ) : (\n                      <PlanItem\n                        plan={item.data as (typeof plans)[0]}\n                        onEdit={onEditPlan}\n                        isSelected={editingPlanId === item.data.id}\n                      />\n                    )}\n                  </div>\n                ))}\n              </ListSection>\n            )}\n\n            {view !== \"completed\" && cycleCompletedPlans.length > 0 && (\n              <ListSection\n                icon={<CheckCircle2 className=\"w-4 h-4 text-emerald-500\" />}\n                title=\"本周期已完成\"\n                count={cycleCompletedPlans.length}\n                colorClass=\"text-emerald-500 bg-emerald-500/20\"\n              >\n                {cycleCompletedPlans.map((plan, index) => (\n                  <div\n                    key={plan.id}\n                    className=\"animate-in fade-in slide-in-from-left-2 duration-300\"\n                    style={{ animationDelay: `${index * 50}ms` }}\n                  >\n                    <PlanItem plan={plan} onEdit={onEditPlan} isSelected={editingPlanId === plan.id} />\n                  </div>\n                ))}\n              </ListSection>\n            )}\n\n            {/* Paused Section */}\n            {view !== \"completed\" && pausedPlans.length > 0 && (\n              <ListSection\n                icon={<Pause className=\"w-4 h-4 text-amber-500\" />}\n                title=\"已暂停\"\n                count={pausedPlans.length}\n                colorClass=\"text-amber-500 bg-amber-500/20\"\n              >\n                {pausedPlans.map((plan, index) => (\n                  <div\n                    key={plan.id}\n                    className=\"animate-in fade-in slide-in-from-left-2 duration-300\"\n                    style={{ animationDelay: `${(activeItems.length + index) * 50}ms` }}\n                  >\n                    <PlanItem plan={plan} onEdit={onEditPlan} isSelected={editingPlanId === plan.id} />\n                  </div>\n                ))}\n              </ListSection>\n            )}\n\n            {/* Completed Section */}\n            {(view === \"completed\" ||\n              (settings.showCompleted && completedItems.length > 0)) && (\n              <ListSection\n                icon={<CheckCircle2 className=\"w-4 h-4 text-green-500\" />}\n                title=\"已完成\"\n                count={completedItems.length}\n                colorClass=\"text-green-500 bg-green-500/20\"\n              >\n                {view === \"completed\" && plans.length > 0 && (\n                  <div className=\"mb-4 p-4 rounded-lg bg-violet-500/10 border border-violet-500/30\">\n                    <p className=\"text-sm font-medium text-violet-400 mb-3\">计划完成统计</p>\n                    <div className=\"space-y-2\">\n                      {plans.map((plan) => (\n                        <div key={plan.id} className=\"flex items-center justify-between text-sm\">\n                          <span className=\"text-foreground truncate flex-1 mr-2\">{plan.title}</span>\n                          <div className=\"flex items-center gap-3 text-xs\">\n                            <span className=\"text-emerald-400\">\n                              本周期 {plan.currentCount}/{plan.cycleTargetCount}\n                            </span>\n                            <span className=\"text-violet-400 font-mono\">总计 {plan.totalCompletedCount} 次</span>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {completedItems.map((item, index) => (\n                  <div\n                    key={item.data.id}\n                    className=\"animate-in fade-in slide-in-from-left-2 duration-300\"\n                    style={{ animationDelay: `${index * 50}ms` }}\n                  >\n                    {item.type === \"todo\" ? (\n                      <TodoItem\n                        todo={item.data as (typeof todos)[0]}\n                        onEdit={onEditTodo}\n                        isSelected={editingTodoId === item.data.id}\n                        urgency=\"none\"\n                      />\n                    ) : (\n                      <PlanItem\n                        plan={item.data as (typeof plans)[0]}\n                        onEdit={onEditPlan}\n                        isSelected={editingPlanId === item.data.id}\n                      />\n                    )}\n                  </div>\n                ))}\n              </ListSection>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  )\n}\n\ninterface ListSectionProps {\n  icon: React.ReactNode\n  title: string\n  count: number\n  colorClass: string\n  children: React.ReactNode\n}\n\nfunction ListSection({ icon, title, count, colorClass, children }: ListSectionProps) {\n  return (\n    <section>\n      <div className=\"flex items-center gap-2 mb-3 text-sm text-muted-foreground\">\n        {icon}\n        <span className=\"font-medium\">{title}</span>\n        <span className={`px-1.5 py-0.5 rounded-full text-xs ${colorClass}`}>{count}</span>\n      </div>\n      <div className=\"space-y-2\">{children}</div>\n    </section>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1992, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,+PAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,yTAAI,GAAG;IAE9B,qBACE,sUAAC;QACC,aAAU;QACV,WAAW,IAAA,+HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 2057, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,sUAAC;QACC,aAAU;QACV,WAAW,IAAA,+HAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS"}},
    {"offset": {"line": 2087, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/label.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\n\nimport { cn } from '@/lib/utils'\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,sUAAC,mSAAmB;QAClB,aAAU;QACV,WAAW,IAAA,+HAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 2120, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,sUAAC,oSAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,sUAAC,qSAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,sUAAC,qSAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,sUAAC,uSAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,+HAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,sUAAC,oSAAoB;gBAAC,OAAO;0BAC3B,cAAA,sUAAC,4UAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;MAxBS;AA0BT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,sUAAC,sSAAsB;kBACrB,cAAA,sUAAC,uSAAuB;YACtB,aAAU;YACV,WAAW,IAAA,+HAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,sUAAC;;;;;8BACD,sUAAC,wSAAwB;oBACvB,WAAW,IAAA,+HAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,sUAAC;;;;;;;;;;;;;;;;AAIT;MAjCS;AAmCT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,sUAAC,qSAAqB;QACpB,aAAU;QACV,WAAW,IAAA,+HAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,sUAAC,oSAAoB;QACnB,aAAU;QACV,WAAW,IAAA,+HAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,sUAAC;gBAAK,WAAU;0BACd,cAAA,sUAAC,6SAA6B;8BAC5B,cAAA,sUAAC,sTAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,sUAAC,wSAAwB;0BAAE;;;;;;;;;;;;AAGjC;MAtBS;AAwBT,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,sUAAC,ySAAyB;QACxB,aAAU;QACV,WAAW,IAAA,+HAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,sUAAC,8SAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,+HAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,sUAAC,sUAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;MAhBS;AAkBT,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,sUAAC,gTAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,+HAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,sUAAC,4UAAe;YAAC,WAAU;;;;;;;;;;;AAGjC;MAhBS"}},
    {"offset": {"line": 2377, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/date-picker.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport { Calendar, ChevronLeft, ChevronRight, X } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { createPortal } from \"react-dom\"\n\ninterface DatePickerProps {\n  value: string\n  onChange: (value: string) => void\n  disabled?: boolean\n}\n\nexport function DatePicker({ value, onChange, disabled = false }: DatePickerProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const [currentMonth, setCurrentMonth] = useState(() => {\n    if (value) return new Date(value)\n    return new Date()\n  })\n  const [position, setPosition] = useState({ top: 0, left: 0, width: 0 })\n  const containerRef = useRef<HTMLDivElement>(null)\n  const triggerRef = useRef<HTMLDivElement>(null)\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  const today = new Date()\n  const yesterday = new Date(today)\n  yesterday.setDate(yesterday.getDate() - 1)\n  const tomorrow = new Date(today)\n  tomorrow.setDate(tomorrow.getDate() + 1)\n\n  const formatDate = (date: Date) => date.toISOString().split(\"T\")[0]\n  const formatDisplayDate = (dateStr: string) => {\n    if (!dateStr) return \"\"\n    const date = new Date(dateStr)\n    return date.toLocaleDateString(\"zh-CN\", { year: \"numeric\", month: \"long\", day: \"numeric\" })\n  }\n\n  const quickDates = [\n    { label: \"昨天\", date: formatDate(yesterday) },\n    { label: \"今天\", date: formatDate(today) },\n    { label: \"明天\", date: formatDate(tomorrow) },\n  ]\n\n  const isQuickDateSelected = (date: string) => value === date\n\n  const updatePosition = () => {\n    if (triggerRef.current) {\n      const rect = triggerRef.current.getBoundingClientRect()\n      setPosition({\n        top: rect.bottom + 4,\n        left: rect.left,\n        width: rect.width,\n      })\n    }\n  }\n\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (containerRef.current && !containerRef.current.contains(e.target as Node)) {\n        setIsOpen(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  useEffect(() => {\n    if (value) {\n      setCurrentMonth(new Date(value))\n    }\n  }, [value])\n\n  useEffect(() => {\n    if (isOpen) {\n      updatePosition()\n    }\n  }, [isOpen])\n\n  const getDaysInMonth = (date: Date) => {\n    const year = date.getFullYear()\n    const month = date.getMonth()\n    const firstDay = new Date(year, month, 1)\n    const lastDay = new Date(year, month + 1, 0)\n    const daysInMonth = lastDay.getDate()\n    const startDay = firstDay.getDay()\n\n    const days: (number | null)[] = []\n    for (let i = 0; i < startDay; i++) {\n      days.push(null)\n    }\n    for (let i = 1; i <= daysInMonth; i++) {\n      days.push(i)\n    }\n    return days\n  }\n\n  const handleDateSelect = (day: number) => {\n    const selected = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day)\n    onChange(formatDate(selected))\n    setIsOpen(false)\n  }\n\n  const goToPrevMonth = () => {\n    setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1, 1))\n  }\n\n  const goToNextMonth = () => {\n    setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 1))\n  }\n\n  const isToday = (day: number) => {\n    const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day)\n    return formatDate(date) === formatDate(today)\n  }\n\n  const isSelected = (day: number) => {\n    const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day)\n    return formatDate(date) === value\n  }\n\n  const isPast = (day: number) => {\n    const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day)\n    return date < new Date(formatDate(yesterday))\n  }\n\n  const weekDays = [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"]\n  const days = getDaysInMonth(currentMonth)\n\n  const calendarDropdown =\n    isOpen &&\n    !disabled &&\n    mounted &&\n    createPortal(\n      <div\n        ref={containerRef}\n        className={cn(\n          \"fixed rounded-lg shadow-xl overflow-hidden\",\n          \"border border-border\",\n          \"animate-in fade-in-0 zoom-in-95 duration-150\",\n        )}\n        style={{\n          backgroundColor: \"hsl(240 6% 10%)\",\n          top: position.top,\n          left: position.left,\n          width: position.width,\n          zIndex: 9999,\n        }}\n      >\n        {/* 月份导航 */}\n        <div className=\"flex items-center justify-between px-3 py-2 border-b border-border bg-muted/30\">\n          <button type=\"button\" onClick={goToPrevMonth} className=\"p-1.5 rounded-md hover:bg-muted transition-colors\">\n            <ChevronLeft className=\"w-4 h-4 text-muted-foreground\" />\n          </button>\n          <span className=\"text-sm font-medium\">\n            {currentMonth.toLocaleDateString(\"zh-CN\", { year: \"numeric\", month: \"long\" })}\n          </span>\n          <button type=\"button\" onClick={goToNextMonth} className=\"p-1.5 rounded-md hover:bg-muted transition-colors\">\n            <ChevronRight className=\"w-4 h-4 text-muted-foreground\" />\n          </button>\n        </div>\n\n        {/* 星期标题 */}\n        <div className=\"grid grid-cols-7 gap-0 px-2 py-1.5 border-b border-border/50\">\n          {weekDays.map((day) => (\n            <div key={day} className=\"text-center text-xs font-medium text-muted-foreground py-1\">\n              {day}\n            </div>\n          ))}\n        </div>\n\n        {/* 日期格子 */}\n        <div className=\"grid grid-cols-7 gap-0.5 p-2\">\n          {days.map((day, index) => (\n            <div key={index} className=\"aspect-square flex items-center justify-center\">\n              {day !== null && (\n                <button\n                  type=\"button\"\n                  onClick={() => handleDateSelect(day)}\n                  className={cn(\n                    \"w-8 h-8 text-sm rounded-lg transition-all duration-150\",\n                    \"hover:bg-primary/20 hover:text-primary\",\n                    isSelected(day) &&\n                      \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground\",\n                    isToday(day) && !isSelected(day) && \"ring-1 ring-primary/50 text-primary\",\n                    isPast(day) && !isSelected(day) && \"text-muted-foreground/50\",\n                  )}\n                >\n                  {day}\n                </button>\n              )}\n            </div>\n          ))}\n        </div>\n\n        {/* 底部快捷操作 */}\n        <div className=\"flex items-center justify-between px-3 py-2 border-t border-border bg-muted/30\">\n          <button\n            type=\"button\"\n            onClick={() => {\n              onChange(formatDate(today))\n              setIsOpen(false)\n            }}\n            className=\"text-xs text-primary hover:underline\"\n          >\n            跳转到今天\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => {\n              onChange(\"\")\n              setIsOpen(false)\n            }}\n            className=\"text-xs text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            清除日期\n          </button>\n        </div>\n      </div>,\n      document.body,\n    )\n\n  return (\n    <div className=\"relative space-y-2\">\n      {/* 快捷日期按钮 */}\n      <div className=\"flex gap-2\">\n        {quickDates.map((item) => (\n          <button\n            key={item.label}\n            type=\"button\"\n            onClick={() => !disabled && onChange(item.date)}\n            disabled={disabled}\n            className={cn(\n              \"flex-1 px-3 py-1.5 text-xs font-medium rounded-lg border transition-all duration-200\",\n              \"hover:scale-[1.02] active:scale-[0.98]\",\n              isQuickDateSelected(item.date)\n                ? \"bg-primary text-primary-foreground border-primary shadow-sm\"\n                : \"bg-muted/50 border-border hover:bg-muted hover:border-muted-foreground/30\",\n              disabled && \"opacity-50 cursor-not-allowed hover:scale-100\",\n            )}\n          >\n            {item.label}\n          </button>\n        ))}\n      </div>\n\n      {/* 日期输入框 */}\n      <div\n        ref={triggerRef}\n        onClick={() => !disabled && setIsOpen(!isOpen)}\n        className={cn(\n          \"flex items-center gap-2 bg-input border border-border rounded-lg px-3 py-2 transition-all duration-200 cursor-pointer\",\n          \"hover:border-muted-foreground/50\",\n          isOpen && \"ring-2 ring-primary/20 border-primary/50\",\n          disabled && \"opacity-50 cursor-not-allowed\",\n        )}\n      >\n        <Calendar className=\"w-4 h-4 text-muted-foreground flex-shrink-0\" />\n        <span className={cn(\"flex-1 text-sm\", !value && \"text-muted-foreground/50\")}>\n          {value ? formatDisplayDate(value) : \"选择日期...\"}\n        </span>\n        {value && !disabled && (\n          <button\n            type=\"button\"\n            onClick={(e) => {\n              e.stopPropagation()\n              onChange(\"\")\n            }}\n            className=\"p-0.5 rounded hover:bg-muted transition-colors\"\n          >\n            <X className=\"w-3.5 h-3.5 text-muted-foreground hover:text-foreground\" />\n          </button>\n        )}\n      </div>\n\n      {/* 日历通过 Portal 渲染 */}\n      {calendarDropdown}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;AALA;;;;;AAaO,SAAS,WAAW,EAAE,KAAK,EAAE,QAAQ,EAAE,WAAW,KAAK,EAAmB;;IAC/E,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,kTAAQ,EAAC;IACrC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,kTAAQ;+BAAC;YAC/C,IAAI,OAAO,OAAO,IAAI,KAAK;YAC3B,OAAO,IAAI;QACb;;IACA,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,kTAAQ,EAAC;QAAE,KAAK;QAAG,MAAM;QAAG,OAAO;IAAE;IACrE,MAAM,eAAe,IAAA,gTAAM,EAAiB;IAC5C,MAAM,aAAa,IAAA,gTAAM,EAAiB;IAC1C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kTAAQ,EAAC;IAEvC,IAAA,mTAAS;gCAAC;YACR,WAAW;QACb;+BAAG,EAAE;IAEL,MAAM,QAAQ,IAAI;IAClB,MAAM,YAAY,IAAI,KAAK;IAC3B,UAAU,OAAO,CAAC,UAAU,OAAO,KAAK;IACxC,MAAM,WAAW,IAAI,KAAK;IAC1B,SAAS,OAAO,CAAC,SAAS,OAAO,KAAK;IAEtC,MAAM,aAAa,CAAC,OAAe,KAAK,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IACnE,MAAM,oBAAoB,CAAC;QACzB,IAAI,CAAC,SAAS,OAAO;QACrB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC,SAAS;YAAE,MAAM;YAAW,OAAO;YAAQ,KAAK;QAAU;IAC3F;IAEA,MAAM,aAAa;QACjB;YAAE,OAAO;YAAM,MAAM,WAAW;QAAW;QAC3C;YAAE,OAAO;YAAM,MAAM,WAAW;QAAO;QACvC;YAAE,OAAO;YAAM,MAAM,WAAW;QAAU;KAC3C;IAED,MAAM,sBAAsB,CAAC,OAAiB,UAAU;IAExD,MAAM,iBAAiB;QACrB,IAAI,WAAW,OAAO,EAAE;YACtB,MAAM,OAAO,WAAW,OAAO,CAAC,qBAAqB;YACrD,YAAY;gBACV,KAAK,KAAK,MAAM,GAAG;gBACnB,MAAM,KAAK,IAAI;gBACf,OAAO,KAAK,KAAK;YACnB;QACF;IACF;IAEA,IAAA,mTAAS;gCAAC;YACR,MAAM;2DAAqB,CAAC;oBAC1B,IAAI,aAAa,OAAO,IAAI,CAAC,aAAa,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAAW;wBAC5E,UAAU;oBACZ;gBACF;;YACA,SAAS,gBAAgB,CAAC,aAAa;YACvC;wCAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;;QACzD;+BAAG,EAAE;IAEL,IAAA,mTAAS;gCAAC;YACR,IAAI,OAAO;gBACT,gBAAgB,IAAI,KAAK;YAC3B;QACF;+BAAG;QAAC;KAAM;IAEV,IAAA,mTAAS;gCAAC;YACR,IAAI,QAAQ;gBACV;YACF;QACF;+BAAG;QAAC;KAAO;IAEX,MAAM,iBAAiB,CAAC;QACtB,MAAM,OAAO,KAAK,WAAW;QAC7B,MAAM,QAAQ,KAAK,QAAQ;QAC3B,MAAM,WAAW,IAAI,KAAK,MAAM,OAAO;QACvC,MAAM,UAAU,IAAI,KAAK,MAAM,QAAQ,GAAG;QAC1C,MAAM,cAAc,QAAQ,OAAO;QACnC,MAAM,WAAW,SAAS,MAAM;QAEhC,MAAM,OAA0B,EAAE;QAClC,IAAK,IAAI,IAAI,GAAG,IAAI,UAAU,IAAK;YACjC,KAAK,IAAI,CAAC;QACZ;QACA,IAAK,IAAI,IAAI,GAAG,KAAK,aAAa,IAAK;YACrC,KAAK,IAAI,CAAC;QACZ;QACA,OAAO;IACT;IAEA,MAAM,mBAAmB,CAAC;QACxB,MAAM,WAAW,IAAI,KAAK,aAAa,WAAW,IAAI,aAAa,QAAQ,IAAI;QAC/E,SAAS,WAAW;QACpB,UAAU;IACZ;IAEA,MAAM,gBAAgB;QACpB,gBAAgB,IAAI,KAAK,aAAa,WAAW,IAAI,aAAa,QAAQ,KAAK,GAAG;IACpF;IAEA,MAAM,gBAAgB;QACpB,gBAAgB,IAAI,KAAK,aAAa,WAAW,IAAI,aAAa,QAAQ,KAAK,GAAG;IACpF;IAEA,MAAM,UAAU,CAAC;QACf,MAAM,OAAO,IAAI,KAAK,aAAa,WAAW,IAAI,aAAa,QAAQ,IAAI;QAC3E,OAAO,WAAW,UAAU,WAAW;IACzC;IAEA,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,IAAI,KAAK,aAAa,WAAW,IAAI,aAAa,QAAQ,IAAI;QAC3E,OAAO,WAAW,UAAU;IAC9B;IAEA,MAAM,SAAS,CAAC;QACd,MAAM,OAAO,IAAI,KAAK,aAAa,WAAW,IAAI,aAAa,QAAQ,IAAI;QAC3E,OAAO,OAAO,IAAI,KAAK,WAAW;IACpC;IAEA,MAAM,WAAW;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IACpD,MAAM,OAAO,eAAe;IAE5B,MAAM,mBACJ,UACA,CAAC,YACD,yBACA,IAAA,6TAAY,gBACV,sUAAC;QACC,KAAK;QACL,WAAW,IAAA,+HAAE,EACX,8CACA,wBACA;QAEF,OAAO;YACL,iBAAiB;YACjB,KAAK,SAAS,GAAG;YACjB,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,KAAK;YACrB,QAAQ;QACV;;0BAGA,sUAAC;gBAAI,WAAU;;kCACb,sUAAC;wBAAO,MAAK;wBAAS,SAAS;wBAAe,WAAU;kCACtD,cAAA,sUAAC,oUAAW;4BAAC,WAAU;;;;;;;;;;;kCAEzB,sUAAC;wBAAK,WAAU;kCACb,aAAa,kBAAkB,CAAC,SAAS;4BAAE,MAAM;4BAAW,OAAO;wBAAO;;;;;;kCAE7E,sUAAC;wBAAO,MAAK;wBAAS,SAAS;wBAAe,WAAU;kCACtD,cAAA,sUAAC,uUAAY;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAK5B,sUAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC,oBACb,sUAAC;wBAAc,WAAU;kCACtB;uBADO;;;;;;;;;;0BAOd,sUAAC;gBAAI,WAAU;0BACZ,KAAK,GAAG,CAAC,CAAC,KAAK,sBACd,sUAAC;wBAAgB,WAAU;kCACxB,QAAQ,sBACP,sUAAC;4BACC,MAAK;4BACL,SAAS,IAAM,iBAAiB;4BAChC,WAAW,IAAA,+HAAE,EACX,0DACA,0CACA,WAAW,QACT,qFACF,QAAQ,QAAQ,CAAC,WAAW,QAAQ,uCACpC,OAAO,QAAQ,CAAC,WAAW,QAAQ;sCAGpC;;;;;;uBAdG;;;;;;;;;;0BAsBd,sUAAC;gBAAI,WAAU;;kCACb,sUAAC;wBACC,MAAK;wBACL,SAAS;4BACP,SAAS,WAAW;4BACpB,UAAU;wBACZ;wBACA,WAAU;kCACX;;;;;;kCAGD,sUAAC;wBACC,MAAK;wBACL,SAAS;4BACP,SAAS;4BACT,UAAU;wBACZ;wBACA,WAAU;kCACX;;;;;;;;;;;;;;;;;cAKL,SAAS,IAAI;IAGjB,qBACE,sUAAC;QAAI,WAAU;;0BAEb,sUAAC;gBAAI,WAAU;0BACZ,WAAW,GAAG,CAAC,CAAC,qBACf,sUAAC;wBAEC,MAAK;wBACL,SAAS,IAAM,CAAC,YAAY,SAAS,KAAK,IAAI;wBAC9C,UAAU;wBACV,WAAW,IAAA,+HAAE,EACX,wFACA,0CACA,oBAAoB,KAAK,IAAI,IACzB,gEACA,6EACJ,YAAY;kCAGb,KAAK,KAAK;uBAbN,KAAK,KAAK;;;;;;;;;;0BAmBrB,sUAAC;gBACC,KAAK;gBACL,SAAS,IAAM,CAAC,YAAY,UAAU,CAAC;gBACvC,WAAW,IAAA,+HAAE,EACX,yHACA,oCACA,UAAU,4CACV,YAAY;;kCAGd,sUAAC,uTAAQ;wBAAC,WAAU;;;;;;kCACpB,sUAAC;wBAAK,WAAW,IAAA,+HAAE,EAAC,kBAAkB,CAAC,SAAS;kCAC7C,QAAQ,kBAAkB,SAAS;;;;;;oBAErC,SAAS,CAAC,0BACT,sUAAC;wBACC,MAAK;wBACL,SAAS,CAAC;4BACR,EAAE,eAAe;4BACjB,SAAS;wBACX;wBACA,WAAU;kCAEV,cAAA,sUAAC,kSAAC;4BAAC,WAAU;;;;;;;;;;;;;;;;;YAMlB;;;;;;;AAGP;GA7QgB;KAAA"}},
    {"offset": {"line": 2768, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/category-input.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport { Tag, ChevronDown, X } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { useTodo } from \"@/context/todo-context\"\nimport { createPortal } from \"react-dom\"\n\ninterface CategoryInputProps {\n  value: string\n  onChange: (value: string) => void\n  disabled?: boolean\n}\n\nexport function CategoryInput({ value, onChange, disabled = false }: CategoryInputProps) {\n  const { todos, plans } = useTodo()\n  const [isOpen, setIsOpen] = useState(false)\n  const [inputValue, setInputValue] = useState(value)\n  const [position, setPosition] = useState({ top: 0, left: 0, width: 0 })\n  const containerRef = useRef<HTMLDivElement>(null)\n  const triggerRef = useRef<HTMLDivElement>(null)\n  const inputRef = useRef<HTMLInputElement>(null)\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  const existingCategories = Array.from(new Set([...todos.map((t) => t.category), ...plans.map((p) => p.category)]))\n    .filter(Boolean)\n    .sort()\n\n  const filteredCategories = existingCategories.filter((cat) => cat.toLowerCase().includes(inputValue.toLowerCase()))\n\n  const showCreateOption = inputValue.trim() && !existingCategories.includes(inputValue.trim())\n\n  useEffect(() => {\n    setInputValue(value)\n  }, [value])\n\n  const updatePosition = () => {\n    if (triggerRef.current) {\n      const rect = triggerRef.current.getBoundingClientRect()\n      setPosition({\n        top: rect.bottom + 4,\n        left: rect.left,\n        width: rect.width,\n      })\n    }\n  }\n\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (\n        containerRef.current &&\n        !containerRef.current.contains(e.target as Node) &&\n        triggerRef.current &&\n        !triggerRef.current.contains(e.target as Node)\n      ) {\n        setIsOpen(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  useEffect(() => {\n    if (isOpen) {\n      updatePosition()\n    }\n  }, [isOpen])\n\n  const handleSelect = (category: string) => {\n    setInputValue(category)\n    onChange(category)\n    setIsOpen(false)\n  }\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setInputValue(e.target.value)\n    setIsOpen(true)\n  }\n\n  const handleInputBlur = () => {\n    setTimeout(() => {\n      if (inputValue.trim()) {\n        onChange(inputValue.trim())\n      }\n    }, 150)\n  }\n\n  const handleClear = () => {\n    setInputValue(\"\")\n    onChange(\"\")\n    inputRef.current?.focus()\n  }\n\n  const dropdownContent =\n    isOpen &&\n    !disabled &&\n    (filteredCategories.length > 0 || showCreateOption) &&\n    mounted &&\n    createPortal(\n      <div\n        ref={containerRef}\n        className={cn(\n          \"fixed rounded-lg shadow-xl overflow-hidden\",\n          \"border border-border\",\n          \"animate-in fade-in-0 zoom-in-95 duration-150\",\n        )}\n        style={{\n          backgroundColor: \"hsl(240 6% 10%)\",\n          top: position.top,\n          left: position.left,\n          width: position.width,\n          zIndex: 9999,\n        }}\n      >\n        <div className=\"max-h-48 overflow-y-auto p-1\">\n          {showCreateOption && (\n            <button\n              type=\"button\"\n              onMouseDown={(e) => e.preventDefault()}\n              onClick={() => handleSelect(inputValue.trim())}\n              className={cn(\n                \"w-full flex items-center gap-2 px-3 py-2 text-sm rounded-md text-left\",\n                \"hover:bg-primary/20 text-primary transition-colors\",\n              )}\n            >\n              <Tag className=\"w-4 h-4\" />\n              创建 \"{inputValue.trim()}\"\n            </button>\n          )}\n          {filteredCategories.map((category) => (\n            <button\n              key={category}\n              type=\"button\"\n              onMouseDown={(e) => e.preventDefault()}\n              onClick={() => handleSelect(category)}\n              className={cn(\n                \"w-full flex items-center gap-2 px-3 py-2 text-sm rounded-md text-left\",\n                \"hover:bg-muted/80 transition-colors\",\n                category === value && \"bg-muted\",\n              )}\n            >\n              <Tag className=\"w-4 h-4 text-muted-foreground\" />\n              {category}\n            </button>\n          ))}\n        </div>\n      </div>,\n      document.body,\n    )\n\n  return (\n    <div className=\"relative\">\n      <div\n        ref={triggerRef}\n        className={cn(\n          \"flex items-center gap-2 bg-input border border-border rounded-lg px-3 py-2 transition-all duration-200\",\n          \"focus-within:ring-2 focus-within:ring-primary/20 focus-within:border-primary/50\",\n          isOpen && \"ring-2 ring-primary/20 border-primary/50\",\n          disabled && \"opacity-50 cursor-not-allowed\",\n        )}\n      >\n        <Tag className=\"w-4 h-4 text-muted-foreground flex-shrink-0\" />\n        <input\n          ref={inputRef}\n          type=\"text\"\n          value={inputValue}\n          onChange={handleInputChange}\n          onFocus={() => setIsOpen(true)}\n          onBlur={handleInputBlur}\n          placeholder=\"选择或输入分类...\"\n          disabled={disabled}\n          className={cn(\n            \"flex-1 bg-transparent border-0 outline-none text-sm\",\n            \"placeholder:text-muted-foreground/50\",\n            disabled && \"cursor-not-allowed\",\n          )}\n        />\n        {inputValue && !disabled && (\n          <button type=\"button\" onClick={handleClear} className=\"p-0.5 rounded hover:bg-muted transition-colors\">\n            <X className=\"w-3.5 h-3.5 text-muted-foreground\" />\n          </button>\n        )}\n        <ChevronDown\n          className={cn(\"w-4 h-4 text-muted-foreground transition-transform duration-200\", isOpen && \"rotate-180\")}\n        />\n      </div>\n\n      {/* 下拉框通过 Portal 渲染 */}\n      {dropdownContent}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3022, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/animated-field.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface AnimatedFieldProps {\n  delay: number\n  isVisible: boolean\n  children: React.ReactNode\n  className?: string\n}\n\nexport function AnimatedField({ delay, isVisible, children, className }: AnimatedFieldProps) {\n  return (\n    <div\n      className={cn(\n        \"space-y-2 transition-all duration-300\",\n        isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-2\",\n        className,\n      )}\n      style={{ transitionDelay: `${delay}ms` }}\n    >\n      {children}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAYO,SAAS,cAAc,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAsB;IACzF,qBACE,sUAAC;QACC,WAAW,IAAA,+HAAE,EACX,yCACA,YAAY,8BAA8B,2BAC1C;QAEF,OAAO;YAAE,iBAAiB,GAAG,MAAM,EAAE,CAAC;QAAC;kBAEtC;;;;;;AAGP;KAbgB"}},
    {"offset": {"line": 3054, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/todo-editor.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { useTodo } from \"@/context/todo-context\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { DatePicker } from \"@/components/ui/date-picker\"\nimport { CategoryInput } from \"@/components/ui/category-input\"\nimport { AnimatedField } from \"@/components/ui/animated-field\"\nimport { X, Flag, Trash2 } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { PRIORITY_CONFIG } from \"@/lib/constants\"\n\ninterface TodoEditorProps {\n  todoId: string\n  onClose: () => void\n}\n\nexport function TodoEditor({ todoId, onClose }: TodoEditorProps) {\n  const { todos, updateTodo, deleteTodo } = useTodo()\n  const todo = todos.find((t) => t.id === todoId)\n  const prevTodoIdRef = useRef(todoId)\n\n  const [title, setTitle] = useState(\"\")\n  const [description, setDescription] = useState(\"\")\n  const [dueDate, setDueDate] = useState(\"\")\n  const [priority, setPriority] = useState<\"low\" | \"medium\" | \"high\">(\"medium\")\n  const [category, setCategory] = useState(\"\")\n  const [isVisible, setIsVisible] = useState(false)\n  const [isContentVisible, setIsContentVisible] = useState(false)\n\n  useEffect(() => {\n    if (todo) {\n      setTitle(todo.title)\n      setDescription(todo.description)\n      setDueDate(todo.dueDate || \"\")\n      setPriority(todo.priority)\n      setCategory(todo.category)\n    }\n  }, [todo])\n\n  useEffect(() => {\n    if (prevTodoIdRef.current !== todoId) {\n      setIsContentVisible(false)\n      prevTodoIdRef.current = todoId\n      requestAnimationFrame(() => {\n        requestAnimationFrame(() => setIsContentVisible(true))\n      })\n    }\n  }, [todoId])\n\n  useEffect(() => {\n    requestAnimationFrame(() => {\n      setIsVisible(true)\n      setTimeout(() => setIsContentVisible(true), 50)\n    })\n  }, [])\n\n  if (!todo) return null\n\n  const handleSave = () => {\n    updateTodo(todoId, { title, description, dueDate: dueDate || null, priority, category })\n  }\n\n  const handleDelete = () => {\n    deleteTodo(todoId)\n    onClose()\n  }\n\n  const handleDueDateChange = (value: string) => {\n    setDueDate(value)\n    updateTodo(todoId, { dueDate: value || null })\n  }\n\n  const handleCategoryChange = (value: string) => {\n    setCategory(value)\n    updateTodo(todoId, { category: value })\n  }\n\n  return (\n    <div\n      className={cn(\n        \"w-96 h-full bg-card border-l border-border flex flex-col rounded-lg shadow-2xl transition-all duration-300 ease-out\",\n        isVisible ? \"opacity-100\" : \"opacity-0\",\n      )}\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-border\">\n        <h3 className=\"font-semibold text-card-foreground\">编辑任务</h3>\n        <button\n          onClick={onClose}\n          className=\"p-1.5 rounded-md hover:bg-muted transition-all duration-200 hover:rotate-90\"\n        >\n          <X className=\"w-5 h-5 text-muted-foreground\" />\n        </button>\n      </div>\n\n      {/* Form */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        <AnimatedField delay={50} isVisible={isContentVisible}>\n          <Label htmlFor=\"title\">标题</Label>\n          <Input\n            id=\"title\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            onBlur={handleSave}\n            className=\"bg-input border-border transition-all duration-200 focus:scale-[1.01]\"\n          />\n        </AnimatedField>\n\n        <AnimatedField delay={100} isVisible={isContentVisible}>\n          <Label htmlFor=\"description\">描述</Label>\n          <Textarea\n            id=\"description\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            onBlur={handleSave}\n            rows={4}\n            className=\"bg-input border-border resize-none transition-all duration-200 focus:scale-[1.01]\"\n            placeholder=\"添加任务描述...\"\n          />\n        </AnimatedField>\n\n        <AnimatedField delay={150} isVisible={isContentVisible}>\n          <Label className=\"flex items-center gap-2\">截止日期</Label>\n          <DatePicker value={dueDate} onChange={handleDueDateChange} />\n        </AnimatedField>\n\n        <AnimatedField delay={200} isVisible={isContentVisible}>\n          <Label className=\"flex items-center gap-2\">\n            <Flag className=\"w-4 h-4\" />\n            优先级\n          </Label>\n          <Select\n            value={priority}\n            onValueChange={(value: \"low\" | \"medium\" | \"high\") => {\n              setPriority(value)\n              updateTodo(todoId, { priority: value })\n            }}\n          >\n            <SelectTrigger className=\"bg-input border-border\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {(\n                Object.entries(PRIORITY_CONFIG) as [\n                  keyof typeof PRIORITY_CONFIG,\n                  (typeof PRIORITY_CONFIG)[keyof typeof PRIORITY_CONFIG],\n                ][]\n              ).map(([key, config]) => (\n                <SelectItem key={key} value={key}>\n                  <div className=\"flex items-center gap-2\">\n                    <span className={cn(\"w-2 h-2 rounded-full\", config.color)} />\n                    {config.label}\n                  </div>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </AnimatedField>\n\n        <AnimatedField delay={250} isVisible={isContentVisible}>\n          <Label>分类</Label>\n          <CategoryInput value={category} onChange={handleCategoryChange} />\n        </AnimatedField>\n\n        <AnimatedField delay={300} isVisible={isContentVisible} className=\"pt-4 border-t border-border\">\n          <p className=\"text-xs text-muted-foreground\">创建于 {todo.createdAt}</p>\n        </AnimatedField>\n      </div>\n\n      {/* Footer */}\n      <AnimatedField delay={350} isVisible={isContentVisible} className=\"p-4 border-t border-border\">\n        <Button\n          variant=\"destructive\"\n          className=\"w-full transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]\"\n          onClick={handleDelete}\n        >\n          <Trash2 className=\"w-4 h-4 mr-2\" />\n          删除任务\n        </Button>\n      </AnimatedField>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3479, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/number-stepper.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { ChevronDown, ChevronUp } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface NumberStepperProps {\n  value: number | string\n  onChange: (value: string) => void\n  min?: number\n  max?: number\n  placeholder?: string\n  disabled?: boolean\n  allowEmpty?: boolean\n}\n\nexport function NumberStepper({\n  value,\n  onChange,\n  min = 1,\n  max = 999,\n  placeholder,\n  disabled = false,\n  allowEmpty = false,\n}: NumberStepperProps) {\n  const numValue = typeof value === \"string\" ? (value === \"\" ? null : Number.parseInt(value)) : value\n  const canDecrement = numValue !== null && numValue > min\n  const canIncrement = numValue === null || numValue < max\n\n  const handleDecrement = () => {\n    if (disabled) return\n    if (numValue === null) {\n      onChange(min.toString())\n    } else if (numValue > min) {\n      onChange((numValue - 1).toString())\n    }\n  }\n\n  const handleIncrement = () => {\n    if (disabled) return\n    if (numValue === null) {\n      onChange(min.toString())\n    } else if (numValue < max) {\n      onChange((numValue + 1).toString())\n    }\n  }\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const val = e.target.value\n    if (val === \"\" && allowEmpty) {\n      onChange(\"\")\n    } else {\n      const num = Number.parseInt(val)\n      if (!isNaN(num) && num >= min && num <= max) {\n        onChange(num.toString())\n      } else if (val === \"\") {\n        onChange(allowEmpty ? \"\" : min.toString())\n      }\n    }\n  }\n\n  return (\n    <div\n      className={cn(\n        \"inline-flex items-center bg-input border border-border rounded-lg overflow-hidden transition-all duration-200\",\n        \"focus-within:ring-2 focus-within:ring-primary/20 focus-within:border-primary/50\",\n        disabled && \"opacity-50 cursor-not-allowed\",\n      )}\n    >\n      <input\n        type=\"text\"\n        inputMode=\"numeric\"\n        value={value}\n        onChange={handleInputChange}\n        placeholder={placeholder}\n        disabled={disabled}\n        className={cn(\n          \"w-14 h-9 text-center bg-transparent border-0 outline-none text-sm font-medium\",\n          \"placeholder:text-muted-foreground/50\",\n          disabled && \"cursor-not-allowed\",\n        )}\n      />\n\n      <div className=\"flex flex-col border-l border-border\">\n        <button\n          type=\"button\"\n          onClick={handleIncrement}\n          disabled={disabled || !canIncrement}\n          className={cn(\n            \"w-7 h-[18px] flex items-center justify-center transition-all duration-150\",\n            \"hover:bg-muted active:bg-muted/70\",\n            (!canIncrement || disabled) && \"opacity-30 cursor-not-allowed hover:bg-transparent\",\n          )}\n        >\n          <ChevronUp className=\"w-3.5 h-3.5\" />\n        </button>\n        <div className=\"h-px bg-border\" />\n        <button\n          type=\"button\"\n          onClick={handleDecrement}\n          disabled={disabled || !canDecrement}\n          className={cn(\n            \"w-7 h-[18px] flex items-center justify-center transition-all duration-150\",\n            \"hover:bg-muted active:bg-muted/70\",\n            (!canDecrement || disabled) && \"opacity-30 cursor-not-allowed hover:bg-transparent\",\n          )}\n        >\n          <ChevronDown className=\"w-3.5 h-3.5\" />\n        </button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AAAA;AACA;AALA;;;;AAiBO,SAAS,cAAc,EAC5B,KAAK,EACL,QAAQ,EACR,MAAM,CAAC,EACP,MAAM,GAAG,EACT,WAAW,EACX,WAAW,KAAK,EAChB,aAAa,KAAK,EACC;IACnB,MAAM,WAAW,OAAO,UAAU,WAAY,UAAU,KAAK,OAAO,OAAO,QAAQ,CAAC,SAAU;IAC9F,MAAM,eAAe,aAAa,QAAQ,WAAW;IACrD,MAAM,eAAe,aAAa,QAAQ,WAAW;IAErD,MAAM,kBAAkB;QACtB,IAAI,UAAU;QACd,IAAI,aAAa,MAAM;YACrB,SAAS,IAAI,QAAQ;QACvB,OAAO,IAAI,WAAW,KAAK;YACzB,SAAS,CAAC,WAAW,CAAC,EAAE,QAAQ;QAClC;IACF;IAEA,MAAM,kBAAkB;QACtB,IAAI,UAAU;QACd,IAAI,aAAa,MAAM;YACrB,SAAS,IAAI,QAAQ;QACvB,OAAO,IAAI,WAAW,KAAK;YACzB,SAAS,CAAC,WAAW,CAAC,EAAE,QAAQ;QAClC;IACF;IAEA,MAAM,oBAAoB,CAAC;QACzB,MAAM,MAAM,EAAE,MAAM,CAAC,KAAK;QAC1B,IAAI,QAAQ,MAAM,YAAY;YAC5B,SAAS;QACX,OAAO;YACL,MAAM,MAAM,OAAO,QAAQ,CAAC;YAC5B,IAAI,CAAC,MAAM,QAAQ,OAAO,OAAO,OAAO,KAAK;gBAC3C,SAAS,IAAI,QAAQ;YACvB,OAAO,IAAI,QAAQ,IAAI;gBACrB,SAAS,aAAa,KAAK,IAAI,QAAQ;YACzC;QACF;IACF;IAEA,qBACE,sUAAC;QACC,WAAW,IAAA,+HAAE,EACX,iHACA,mFACA,YAAY;;0BAGd,sUAAC;gBACC,MAAK;gBACL,WAAU;gBACV,OAAO;gBACP,UAAU;gBACV,aAAa;gBACb,UAAU;gBACV,WAAW,IAAA,+HAAE,EACX,iFACA,wCACA,YAAY;;;;;;0BAIhB,sUAAC;gBAAI,WAAU;;kCACb,sUAAC;wBACC,MAAK;wBACL,SAAS;wBACT,UAAU,YAAY,CAAC;wBACvB,WAAW,IAAA,+HAAE,EACX,6EACA,qCACA,CAAC,CAAC,gBAAgB,QAAQ,KAAK;kCAGjC,cAAA,sUAAC,8TAAS;4BAAC,WAAU;;;;;;;;;;;kCAEvB,sUAAC;wBAAI,WAAU;;;;;;kCACf,sUAAC;wBACC,MAAK;wBACL,SAAS;wBACT,UAAU,YAAY,CAAC;wBACvB,WAAW,IAAA,+HAAE,EACX,6EACA,qCACA,CAAC,CAAC,gBAAgB,QAAQ,KAAK;kCAGjC,cAAA,sUAAC,oUAAW;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAKjC;KAhGgB"}},
    {"offset": {"line": 3607, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/plan-toggle.tsx"],"sourcesContent":["\"use client\"\n\nimport { Repeat } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface PlanToggleProps {\n  isPlan: boolean\n  onToggle: () => void\n  isVisible?: boolean\n}\n\nexport function PlanToggle({ isPlan, onToggle, isVisible = true }: PlanToggleProps) {\n  return (\n    <div\n      className={cn(\n        \"relative overflow-hidden p-3 rounded-xl transition-all duration-500 ease-out\",\n        isPlan\n          ? \"bg-gradient-to-r from-violet-500/20 to-purple-500/10 border border-violet-500/40 shadow-lg shadow-violet-500/10\"\n          : \"bg-muted/30 border border-transparent hover:bg-muted/50\",\n        isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-2\",\n      )}\n    >\n      <div\n        className={cn(\n          \"absolute inset-0 bg-gradient-to-r from-violet-500/5 to-transparent transition-all duration-700\",\n          isPlan ? \"opacity-100 scale-100\" : \"opacity-0 scale-95\",\n        )}\n      />\n      <div className=\"relative flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <div\n            className={cn(\n              \"p-2 rounded-lg transition-all duration-500\",\n              isPlan ? \"bg-violet-500/30 rotate-0 scale-100\" : \"bg-muted rotate-180 scale-90\",\n            )}\n          >\n            <Repeat\n              className={cn(\n                \"w-4 h-4 transition-all duration-500\",\n                isPlan ? \"text-violet-400\" : \"text-muted-foreground\",\n              )}\n            />\n          </div>\n          <div>\n            <span\n              className={cn(\n                \"text-sm font-medium transition-colors duration-300\",\n                isPlan ? \"text-violet-400\" : \"text-foreground\",\n              )}\n            >\n              创建为计划\n            </span>\n            <p\n              className={cn(\n                \"text-xs transition-all duration-300\",\n                isPlan ? \"text-violet-400/70\" : \"text-muted-foreground opacity-70\",\n              )}\n            >\n              {isPlan ? \"可设置重复周期和时间\" : \"单次任务\"}\n            </p>\n          </div>\n        </div>\n        <button\n          onClick={onToggle}\n          className={cn(\n            \"relative w-14 h-8 rounded-full transition-all duration-500 ease-out\",\n            isPlan\n              ? \"bg-gradient-to-r from-violet-500 to-purple-500 shadow-lg shadow-violet-500/30\"\n              : \"bg-muted hover:bg-muted/80\",\n          )}\n        >\n          <span\n            className={cn(\n              \"absolute inset-0.5 rounded-full transition-all duration-500\",\n              isPlan ? \"bg-violet-400/20\" : \"bg-transparent\",\n            )}\n          />\n          <span\n            className={cn(\n              \"absolute top-1 w-6 h-6 rounded-full bg-white shadow-md transition-all duration-500 ease-out transform\",\n              isPlan ? \"left-7 scale-110 shadow-violet-500/30\" : \"left-1 scale-100\",\n            )}\n          >\n            <span\n              className={cn(\n                \"absolute inset-0 flex items-center justify-center transition-all duration-300\",\n                isPlan ? \"opacity-100\" : \"opacity-0\",\n              )}\n            >\n              <Repeat className=\"w-3 h-3 text-violet-500\" />\n            </span>\n          </span>\n        </button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAWO,SAAS,WAAW,EAAE,MAAM,EAAE,QAAQ,EAAE,YAAY,IAAI,EAAmB;IAChF,qBACE,sUAAC;QACC,WAAW,IAAA,+HAAE,EACX,gFACA,SACI,oHACA,2DACJ,YAAY,8BAA8B;;0BAG5C,sUAAC;gBACC,WAAW,IAAA,+HAAE,EACX,kGACA,SAAS,0BAA0B;;;;;;0BAGvC,sUAAC;gBAAI,WAAU;;kCACb,sUAAC;wBAAI,WAAU;;0CACb,sUAAC;gCACC,WAAW,IAAA,+HAAE,EACX,8CACA,SAAS,wCAAwC;0CAGnD,cAAA,sUAAC,iTAAM;oCACL,WAAW,IAAA,+HAAE,EACX,uCACA,SAAS,oBAAoB;;;;;;;;;;;0CAInC,sUAAC;;kDACC,sUAAC;wCACC,WAAW,IAAA,+HAAE,EACX,sDACA,SAAS,oBAAoB;kDAEhC;;;;;;kDAGD,sUAAC;wCACC,WAAW,IAAA,+HAAE,EACX,uCACA,SAAS,uBAAuB;kDAGjC,SAAS,eAAe;;;;;;;;;;;;;;;;;;kCAI/B,sUAAC;wBACC,SAAS;wBACT,WAAW,IAAA,+HAAE,EACX,uEACA,SACI,kFACA;;0CAGN,sUAAC;gCACC,WAAW,IAAA,+HAAE,EACX,+DACA,SAAS,qBAAqB;;;;;;0CAGlC,sUAAC;gCACC,WAAW,IAAA,+HAAE,EACX,yGACA,SAAS,0CAA0C;0CAGrD,cAAA,sUAAC;oCACC,WAAW,IAAA,+HAAE,EACX,iFACA,SAAS,gBAAgB;8CAG3B,cAAA,sUAAC,iTAAM;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOhC;KArFgB"}},
    {"offset": {"line": 3740, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/repeat-toggle.tsx"],"sourcesContent":["\"use client\"\n\nimport { Repeat } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface RepeatToggleProps {\n  isRepeating: boolean\n  onToggle: () => void\n  disabled?: boolean\n  title?: string\n  subtitle?: string\n}\n\nexport function RepeatToggle({\n  isRepeating,\n  onToggle,\n  disabled = false,\n  title = \"周期重复\",\n  subtitle,\n}: RepeatToggleProps) {\n  const defaultSubtitle = isRepeating ? \"计划会按周期自动重置\" : \"计划完成后不再重复\"\n\n  return (\n    <div\n      className={cn(\n        \"relative overflow-hidden p-3 rounded-xl transition-all duration-500 ease-out\",\n        isRepeating\n          ? \"bg-gradient-to-r from-violet-500/20 to-purple-500/10 border border-violet-500/40\"\n          : \"bg-muted/30 border border-transparent hover:bg-muted/50\",\n        disabled && \"opacity-50\",\n      )}\n    >\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <div\n            className={cn(\"p-2 rounded-lg transition-all duration-500\", isRepeating ? \"bg-violet-500/30\" : \"bg-muted\")}\n          >\n            <Repeat\n              className={cn(\n                \"w-4 h-4 transition-all duration-500\",\n                isRepeating ? \"text-violet-400\" : \"text-muted-foreground\",\n              )}\n            />\n          </div>\n          <div>\n            <span\n              className={cn(\n                \"text-sm font-medium transition-colors duration-300\",\n                isRepeating ? \"text-violet-400\" : \"text-foreground\",\n              )}\n            >\n              {title}\n            </span>\n            <p\n              className={cn(\n                \"text-xs transition-all duration-300\",\n                isRepeating ? \"text-violet-400/70\" : \"text-muted-foreground opacity-70\",\n              )}\n            >\n              {subtitle || defaultSubtitle}\n            </p>\n          </div>\n        </div>\n        <button\n          onClick={() => !disabled && onToggle()}\n          disabled={disabled}\n          className={cn(\n            \"relative w-12 h-7 rounded-full transition-all duration-500 ease-out\",\n            isRepeating\n              ? \"bg-gradient-to-r from-violet-500 to-purple-500 shadow-lg shadow-violet-500/30\"\n              : \"bg-muted hover:bg-muted/80\",\n            disabled && \"cursor-not-allowed\",\n          )}\n        >\n          <span\n            className={cn(\n              \"absolute top-1 w-5 h-5 rounded-full bg-white shadow-md transition-all duration-500 ease-out\",\n              isRepeating ? \"left-6\" : \"left-1\",\n            )}\n          />\n        </button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAaO,SAAS,aAAa,EAC3B,WAAW,EACX,QAAQ,EACR,WAAW,KAAK,EAChB,QAAQ,MAAM,EACd,QAAQ,EACU;IAClB,MAAM,kBAAkB,cAAc,eAAe;IAErD,qBACE,sUAAC;QACC,WAAW,IAAA,+HAAE,EACX,gFACA,cACI,qFACA,2DACJ,YAAY;kBAGd,cAAA,sUAAC;YAAI,WAAU;;8BACb,sUAAC;oBAAI,WAAU;;sCACb,sUAAC;4BACC,WAAW,IAAA,+HAAE,EAAC,8CAA8C,cAAc,qBAAqB;sCAE/F,cAAA,sUAAC,iTAAM;gCACL,WAAW,IAAA,+HAAE,EACX,uCACA,cAAc,oBAAoB;;;;;;;;;;;sCAIxC,sUAAC;;8CACC,sUAAC;oCACC,WAAW,IAAA,+HAAE,EACX,sDACA,cAAc,oBAAoB;8CAGnC;;;;;;8CAEH,sUAAC;oCACC,WAAW,IAAA,+HAAE,EACX,uCACA,cAAc,uBAAuB;8CAGtC,YAAY;;;;;;;;;;;;;;;;;;8BAInB,sUAAC;oBACC,SAAS,IAAM,CAAC,YAAY;oBAC5B,UAAU;oBACV,WAAW,IAAA,+HAAE,EACX,uEACA,cACI,kFACA,8BACJ,YAAY;8BAGd,cAAA,sUAAC;wBACC,WAAW,IAAA,+HAAE,EACX,+FACA,cAAc,WAAW;;;;;;;;;;;;;;;;;;;;;;AAOvC;KAvEgB"}},
    {"offset": {"line": 3843, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/todo-creator.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useTodo } from \"@/context/todo-context\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { NumberStepper } from \"@/components/ui/number-stepper\"\nimport { CategoryInput } from \"@/components/ui/category-input\"\nimport { DatePicker } from \"@/components/ui/date-picker\"\nimport { AnimatedField } from \"@/components/ui/animated-field\"\nimport { PlanToggle } from \"@/components/ui/plan-toggle\"\nimport { RepeatToggle } from \"@/components/ui/repeat-toggle\"\nimport { X, Flag, Plus, Repeat } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport type { View } from \"@/app/page\"\nimport { WEEK_DAYS, PRIORITY_CONFIG } from \"@/lib/constants\"\n\ninterface TodoCreatorProps {\n  view: View\n  onClose: () => void\n}\n\nexport function TodoCreator({ view, onClose }: TodoCreatorProps) {\n  const { addTodo, addPlan } = useTodo()\n  const [isVisible, setIsVisible] = useState(false)\n  const [isPlan, setIsPlan] = useState(false)\n\n  // 通用字段\n  const [title, setTitle] = useState(\"\")\n  const [description, setDescription] = useState(\"\")\n  const [category, setCategory] = useState(\"默认\")\n  const [important, setImportant] = useState(view === \"important\")\n\n  // 任务专用字段\n  const [dueDate, setDueDate] = useState(\"\")\n  const [priority, setPriority] = useState<\"low\" | \"medium\" | \"high\">(\"medium\")\n\n  // 计划专用字段\n  const [repeatCycle, setRepeatCycle] = useState<\"daily\" | \"weekly\" | \"monthly\">(\"weekly\")\n  const [planDays, setPlanDays] = useState<number[]>([6, 0])\n  const [startTime, setStartTime] = useState(\"20:00\")\n  const [endTime, setEndTime] = useState(\"21:00\")\n  const [isRepeating, setIsRepeating] = useState(false)\n  const [repeatCount, setRepeatCount] = useState<string>(\"\")\n  const [cycleTargetCount, setCycleTargetCount] = useState<string>(\"1\")\n\n  useEffect(() => {\n    requestAnimationFrame(() => setIsVisible(true))\n  }, [])\n\n  const handleCreate = () => {\n    if (!title.trim()) return\n\n    if (isPlan) {\n      addPlan({\n        title: title.trim(),\n        description,\n        repeatCycle,\n        planDays,\n        startTime,\n        endTime,\n        repeatCount: isRepeating ? (repeatCount ? Number.parseInt(repeatCount) : null) : 1,\n        cycleTargetCount: cycleTargetCount ? Number.parseInt(cycleTargetCount) : 1,\n        category,\n        active: true,\n        important,\n      })\n    } else {\n      addTodo({\n        title: title.trim(),\n        description,\n        completed: false,\n        important,\n        dueDate: dueDate || null,\n        priority,\n        category,\n      })\n    }\n    onClose()\n  }\n\n  const handleClose = () => {\n    setIsVisible(false)\n    setTimeout(onClose, 200)\n  }\n\n  const togglePlanDay = (day: number) => {\n    setPlanDays((prev) => (prev.includes(day) ? prev.filter((d) => d !== day) : [...prev, day]))\n  }\n\n  return (\n    <div\n      className={cn(\n        \"w-96 h-full bg-card border-l border-border flex flex-col shadow-2xl transition-all duration-300 ease-out\",\n        isVisible ? \"opacity-100\" : \"opacity-0\",\n      )}\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-border\">\n        <h3 className=\"font-semibold text-card-foreground flex items-center gap-2\">\n          {isPlan ? (\n            <>\n              <Repeat className=\"w-5 h-5 text-violet-500\" />\n              新建计划\n            </>\n          ) : (\n            <>\n              <Plus className=\"w-5 h-5 text-primary\" />\n              新建任务\n            </>\n          )}\n        </h3>\n        <button\n          onClick={handleClose}\n          className=\"p-1.5 rounded-md hover:bg-muted transition-all duration-200 hover:rotate-90\"\n        >\n          <X className=\"w-5 h-5 text-muted-foreground\" />\n        </button>\n      </div>\n\n      {/* Form */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        <PlanToggle isPlan={isPlan} onToggle={() => setIsPlan(!isPlan)} isVisible={isVisible} />\n\n        {/* 标题 */}\n        <AnimatedField isVisible={isVisible} delay={50}>\n          <Label htmlFor=\"new-title\">\n            标题 <span className=\"text-destructive\">*</span>\n          </Label>\n          <Input\n            id=\"new-title\"\n            autoFocus\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            onKeyDown={(e) => e.key === \"Enter\" && !e.shiftKey && handleCreate()}\n            className=\"bg-input border-border transition-all duration-200 focus:scale-[1.01]\"\n            placeholder={isPlan ? \"输入计划标题...\" : \"输入任务标题...\"}\n          />\n        </AnimatedField>\n\n        {/* 描述 */}\n        <AnimatedField isVisible={isVisible} delay={100}>\n          <Label htmlFor=\"new-description\">描述</Label>\n          <Textarea\n            id=\"new-description\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            rows={3}\n            className=\"bg-input border-border resize-none transition-all duration-200 focus:scale-[1.01]\"\n            placeholder={isPlan ? \"添加计划描述...\" : \"添加任务描述...\"}\n          />\n        </AnimatedField>\n\n        {/* 计划专用字段 */}\n        <div\n          className={cn(\n            \"space-y-4 transition-all duration-500 ease-out overflow-hidden\",\n            isPlan ? \"max-h-[800px] opacity-100\" : \"max-h-0 opacity-0\",\n          )}\n        >\n          <RepeatToggle isRepeating={isRepeating} onToggle={() => setIsRepeating(!isRepeating)} />\n\n          <div\n            className={cn(\n              \"space-y-4 transition-all duration-500 ease-out overflow-hidden\",\n              isRepeating ? \"max-h-[200px] opacity-100\" : \"max-h-0 opacity-0\",\n            )}\n          >\n            <div className=\"space-y-2\">\n              <Label className=\"flex items-center gap-2\">\n                <Repeat className=\"w-4 h-4\" />\n                重复周期\n              </Label>\n              <Select value={repeatCycle} onValueChange={(v: \"daily\" | \"weekly\" | \"monthly\") => setRepeatCycle(v)}>\n                <SelectTrigger className=\"bg-input border-border\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"daily\">每天</SelectItem>\n                  <SelectItem value=\"weekly\">每周</SelectItem>\n                  <SelectItem value=\"monthly\">每月</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label>总重复次数（留空为无限）</Label>\n              <NumberStepper\n                value={repeatCount}\n                onChange={setRepeatCount}\n                min={1}\n                max={999}\n                placeholder=\"无限\"\n                allowEmpty\n              />\n            </div>\n          </div>\n\n          {isRepeating && repeatCycle === \"weekly\" && (\n            <div className=\"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\">\n              <Label>计划日</Label>\n              <div className=\"flex flex-wrap gap-2\">\n                {WEEK_DAYS.map((day) => (\n                  <button\n                    key={day.value}\n                    onClick={() => togglePlanDay(day.value)}\n                    className={cn(\n                      \"px-3 py-1.5 text-xs rounded-md transition-all duration-200\",\n                      planDays.includes(day.value)\n                        ? \"bg-violet-500 text-white scale-105\"\n                        : \"bg-muted text-muted-foreground hover:bg-muted/80 hover:scale-105\",\n                    )}\n                  >\n                    {day.label}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {isRepeating && repeatCycle === \"monthly\" && (\n            <div className=\"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300\">\n              <Label>每月日期</Label>\n              <div className=\"flex flex-wrap gap-1.5 max-h-32 overflow-y-auto\">\n                {Array.from({ length: 31 }, (_, i) => i + 1).map((day) => (\n                  <button\n                    key={day}\n                    onClick={() => togglePlanDay(day)}\n                    className={cn(\n                      \"w-8 h-8 text-xs rounded-md transition-all duration-200\",\n                      planDays.includes(day)\n                        ? \"bg-violet-500 text-white scale-105\"\n                        : \"bg-muted text-muted-foreground hover:bg-muted/80\",\n                    )}\n                  >\n                    {day}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div className=\"space-y-2\">\n              <Label>开始时间</Label>\n              <Input\n                type=\"time\"\n                value={startTime}\n                onChange={(e) => setStartTime(e.target.value)}\n                className=\"bg-input border-border\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>结束时间</Label>\n              <Input\n                type=\"time\"\n                value={endTime}\n                onChange={(e) => setEndTime(e.target.value)}\n                className=\"bg-input border-border\"\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label>每周期目标次数</Label>\n            <NumberStepper value={cycleTargetCount} onChange={setCycleTargetCount} min={1} max={99} placeholder=\"1\" />\n            <p className=\"text-xs text-muted-foreground\">达到目标次数后，本周期计划自动完成</p>\n          </div>\n        </div>\n\n        {/* 任务专用字段 */}\n        <div\n          className={cn(\n            \"space-y-4 transition-all duration-500 ease-out overflow-hidden\",\n            !isPlan ? \"max-h-[400px] opacity-100\" : \"max-h-0 opacity-0\",\n          )}\n        >\n          <div className=\"space-y-2\">\n            <Label className=\"flex items-center gap-2\">截止日期</Label>\n            <DatePicker value={dueDate} onChange={setDueDate} />\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"flex items-center gap-2\">\n              <Flag className=\"w-4 h-4\" />\n              优先级\n            </Label>\n            <Select value={priority} onValueChange={(value: \"low\" | \"medium\" | \"high\") => setPriority(value)}>\n              <SelectTrigger className=\"bg-input border-border\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {(\n                  Object.entries(PRIORITY_CONFIG) as [\n                    keyof typeof PRIORITY_CONFIG,\n                    (typeof PRIORITY_CONFIG)[keyof typeof PRIORITY_CONFIG],\n                  ][]\n                ).map(([key, config]) => (\n                  <SelectItem key={key} value={key}>\n                    <div className=\"flex items-center gap-2\">\n                      <span className={cn(\"w-2 h-2 rounded-full\", config.color)} />\n                      {config.label}\n                    </div>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        <AnimatedField isVisible={isVisible} delay={350}>\n          <Label>分类</Label>\n          <CategoryInput value={category} onChange={setCategory} />\n        </AnimatedField>\n\n        {/* 重要标记 */}\n        <AnimatedField\n          isVisible={isVisible}\n          delay={400}\n          className=\"flex items-center justify-between p-3 rounded-lg bg-muted/50\"\n        >\n          <span className=\"text-sm text-foreground\">标记为重要</span>\n          <button\n            onClick={() => setImportant(!important)}\n            className={cn(\n              \"relative w-10 h-6 rounded-full transition-all duration-300\",\n              important ? \"bg-yellow-500 shadow-lg shadow-yellow-500/30\" : \"bg-muted\",\n            )}\n          >\n            <span\n              className={cn(\n                \"absolute top-1 w-4 h-4 rounded-full bg-white shadow transition-all duration-300\",\n                important ? \"left-5\" : \"left-1\",\n              )}\n            />\n          </button>\n        </AnimatedField>\n      </div>\n\n      {/* Footer */}\n      <div\n        className={cn(\n          \"p-4 border-t border-border flex gap-2 transition-all duration-300 delay-[450ms]\",\n          isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-2\",\n        )}\n      >\n        <Button\n          variant=\"outline\"\n          className=\"flex-1 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] bg-transparent\"\n          onClick={handleClose}\n        >\n          取消\n        </Button>\n        <Button\n          className={cn(\n            \"flex-1 transition-all duration-300 hover:scale-[1.02] active:scale-[0.98]\",\n            isPlan &&\n              \"bg-gradient-to-r from-violet-500 to-purple-500 hover:from-violet-600 hover:to-purple-600 shadow-lg shadow-violet-500/20\",\n          )}\n          onClick={handleCreate}\n          disabled={!title.trim() || (isPlan && isRepeating && repeatCycle !== \"daily\" && planDays.length === 0)}\n        >\n          {isPlan ? (\n            <>\n              <Repeat className=\"w-4 h-4 mr-2\" />\n              创建计划\n            </>\n          ) : (\n            <>\n              <Plus className=\"w-4 h-4 mr-2\" />\n              创建任务\n            </>\n          )}\n        </Button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;;;AAlBA;;;;;;;;;;;;;;;;;AAyBO,SAAS,YAAY,EAAE,IAAI,EAAE,OAAO,EAAoB;;IAC7D,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,mJAAO;IACpC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kTAAQ,EAAC;IAC3C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,kTAAQ,EAAC;IAErC,OAAO;IACP,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,kTAAQ,EAAC;IACnC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,kTAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,kTAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kTAAQ,EAAC,SAAS;IAEpD,SAAS;IACT,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kTAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,kTAAQ,EAA4B;IAEpE,SAAS;IACT,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,kTAAQ,EAAiC;IAC/E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,kTAAQ,EAAW;QAAC;QAAG;KAAE;IACzD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kTAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kTAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,kTAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,kTAAQ,EAAS;IACvD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,kTAAQ,EAAS;IAEjE,IAAA,mTAAS;iCAAC;YACR;yCAAsB,IAAM,aAAa;;QAC3C;gCAAG,EAAE;IAEL,MAAM,eAAe;QACnB,IAAI,CAAC,MAAM,IAAI,IAAI;QAEnB,IAAI,QAAQ;YACV,QAAQ;gBACN,OAAO,MAAM,IAAI;gBACjB;gBACA;gBACA;gBACA;gBACA;gBACA,aAAa,cAAe,cAAc,OAAO,QAAQ,CAAC,eAAe,OAAQ;gBACjF,kBAAkB,mBAAmB,OAAO,QAAQ,CAAC,oBAAoB;gBACzE;gBACA,QAAQ;gBACR;YACF;QACF,OAAO;YACL,QAAQ;gBACN,OAAO,MAAM,IAAI;gBACjB;gBACA,WAAW;gBACX;gBACA,SAAS,WAAW;gBACpB;gBACA;YACF;QACF;QACA;IACF;IAEA,MAAM,cAAc;QAClB,aAAa;QACb,WAAW,SAAS;IACtB;IAEA,MAAM,gBAAgB,CAAC;QACrB,YAAY,CAAC,OAAU,KAAK,QAAQ,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,IAAM,MAAM,OAAO;mBAAI;gBAAM;aAAI;IAC5F;IAEA,qBACE,sUAAC;QACC,WAAW,IAAA,+HAAE,EACX,4GACA,YAAY,gBAAgB;;0BAI9B,sUAAC;gBAAI,WAAU;;kCACb,sUAAC;wBAAG,WAAU;kCACX,uBACC;;8CACE,sUAAC,iTAAM;oCAAC,WAAU;;;;;;gCAA4B;;yDAIhD;;8CACE,sUAAC,2SAAI;oCAAC,WAAU;;;;;;gCAAyB;;;;;;;;kCAK/C,sUAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,sUAAC,kSAAC;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAKjB,sUAAC;gBAAI,WAAU;;kCACb,sUAAC,8JAAU;wBAAC,QAAQ;wBAAQ,UAAU,IAAM,UAAU,CAAC;wBAAS,WAAW;;;;;;kCAG3E,sUAAC,oKAAa;wBAAC,WAAW;wBAAW,OAAO;;0CAC1C,sUAAC,gJAAK;gCAAC,SAAQ;;oCAAY;kDACtB,sUAAC;wCAAK,WAAU;kDAAmB;;;;;;;;;;;;0CAExC,sUAAC,gJAAK;gCACJ,IAAG;gCACH,SAAS;gCACT,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,IAAI;gCACtD,WAAU;gCACV,aAAa,SAAS,cAAc;;;;;;;;;;;;kCAKxC,sUAAC,oKAAa;wBAAC,WAAW;wBAAW,OAAO;;0CAC1C,sUAAC,gJAAK;gCAAC,SAAQ;0CAAkB;;;;;;0CACjC,sUAAC,sJAAQ;gCACP,IAAG;gCACH,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,MAAM;gCACN,WAAU;gCACV,aAAa,SAAS,cAAc;;;;;;;;;;;;kCAKxC,sUAAC;wBACC,WAAW,IAAA,+HAAE,EACX,kEACA,SAAS,8BAA8B;;0CAGzC,sUAAC,kKAAY;gCAAC,aAAa;gCAAa,UAAU,IAAM,eAAe,CAAC;;;;;;0CAExE,sUAAC;gCACC,WAAW,IAAA,+HAAE,EACX,kEACA,cAAc,8BAA8B;;kDAG9C,sUAAC;wCAAI,WAAU;;0DACb,sUAAC,gJAAK;gDAAC,WAAU;;kEACf,sUAAC,iTAAM;wDAAC,WAAU;;;;;;oDAAY;;;;;;;0DAGhC,sUAAC,kJAAM;gDAAC,OAAO;gDAAa,eAAe,CAAC,IAAsC,eAAe;;kEAC/F,sUAAC,yJAAa;wDAAC,WAAU;kEACvB,cAAA,sUAAC,uJAAW;;;;;;;;;;kEAEd,sUAAC,yJAAa;;0EACZ,sUAAC,sJAAU;gEAAC,OAAM;0EAAQ;;;;;;0EAC1B,sUAAC,sJAAU;gEAAC,OAAM;0EAAS;;;;;;0EAC3B,sUAAC,sJAAU;gEAAC,OAAM;0EAAU;;;;;;;;;;;;;;;;;;;;;;;;kDAKlC,sUAAC;wCAAI,WAAU;;0DACb,sUAAC,gJAAK;0DAAC;;;;;;0DACP,sUAAC,oKAAa;gDACZ,OAAO;gDACP,UAAU;gDACV,KAAK;gDACL,KAAK;gDACL,aAAY;gDACZ,UAAU;;;;;;;;;;;;;;;;;;4BAKf,eAAe,gBAAgB,0BAC9B,sUAAC;gCAAI,WAAU;;kDACb,sUAAC,gJAAK;kDAAC;;;;;;kDACP,sUAAC;wCAAI,WAAU;kDACZ,0IAAS,CAAC,GAAG,CAAC,CAAC,oBACd,sUAAC;gDAEC,SAAS,IAAM,cAAc,IAAI,KAAK;gDACtC,WAAW,IAAA,+HAAE,EACX,8DACA,SAAS,QAAQ,CAAC,IAAI,KAAK,IACvB,uCACA;0DAGL,IAAI,KAAK;+CATL,IAAI,KAAK;;;;;;;;;;;;;;;;4BAgBvB,eAAe,gBAAgB,2BAC9B,sUAAC;gCAAI,WAAU;;kDACb,sUAAC,gJAAK;kDAAC;;;;;;kDACP,sUAAC;wCAAI,WAAU;kDACZ,MAAM,IAAI,CAAC;4CAAE,QAAQ;wCAAG,GAAG,CAAC,GAAG,IAAM,IAAI,GAAG,GAAG,CAAC,CAAC,oBAChD,sUAAC;gDAEC,SAAS,IAAM,cAAc;gDAC7B,WAAW,IAAA,+HAAE,EACX,0DACA,SAAS,QAAQ,CAAC,OACd,uCACA;0DAGL;+CATI;;;;;;;;;;;;;;;;0CAgBf,sUAAC;gCAAI,WAAU;;kDACb,sUAAC;wCAAI,WAAU;;0DACb,sUAAC,gJAAK;0DAAC;;;;;;0DACP,sUAAC,gJAAK;gDACJ,MAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;gDAC5C,WAAU;;;;;;;;;;;;kDAGd,sUAAC;wCAAI,WAAU;;0DACb,sUAAC,gJAAK;0DAAC;;;;;;0DACP,sUAAC,gJAAK;gDACJ,MAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gDAC1C,WAAU;;;;;;;;;;;;;;;;;;0CAKhB,sUAAC;gCAAI,WAAU;;kDACb,sUAAC,gJAAK;kDAAC;;;;;;kDACP,sUAAC,oKAAa;wCAAC,OAAO;wCAAkB,UAAU;wCAAqB,KAAK;wCAAG,KAAK;wCAAI,aAAY;;;;;;kDACpG,sUAAC;wCAAE,WAAU;kDAAgC;;;;;;;;;;;;;;;;;;kCAKjD,sUAAC;wBACC,WAAW,IAAA,+HAAE,EACX,kEACA,CAAC,SAAS,8BAA8B;;0CAG1C,sUAAC;gCAAI,WAAU;;kDACb,sUAAC,gJAAK;wCAAC,WAAU;kDAA0B;;;;;;kDAC3C,sUAAC,8JAAU;wCAAC,OAAO;wCAAS,UAAU;;;;;;;;;;;;0CAGxC,sUAAC;gCAAI,WAAU;;kDACb,sUAAC,gJAAK;wCAAC,WAAU;;0DACf,sUAAC,2SAAI;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAG9B,sUAAC,kJAAM;wCAAC,OAAO;wCAAU,eAAe,CAAC,QAAqC,YAAY;;0DACxF,sUAAC,yJAAa;gDAAC,WAAU;0DACvB,cAAA,sUAAC,uJAAW;;;;;;;;;;0DAEd,sUAAC,yJAAa;0DACX,AACC,OAAO,OAAO,CAAC,gJAAe,EAI9B,GAAG,CAAC,CAAC,CAAC,KAAK,OAAO,iBAClB,sUAAC,sJAAU;wDAAW,OAAO;kEAC3B,cAAA,sUAAC;4DAAI,WAAU;;8EACb,sUAAC;oEAAK,WAAW,IAAA,+HAAE,EAAC,wBAAwB,OAAO,KAAK;;;;;;gEACvD,OAAO,KAAK;;;;;;;uDAHA;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAY3B,sUAAC,oKAAa;wBAAC,WAAW;wBAAW,OAAO;;0CAC1C,sUAAC,gJAAK;0CAAC;;;;;;0CACP,sUAAC,oKAAa;gCAAC,OAAO;gCAAU,UAAU;;;;;;;;;;;;kCAI5C,sUAAC,oKAAa;wBACZ,WAAW;wBACX,OAAO;wBACP,WAAU;;0CAEV,sUAAC;gCAAK,WAAU;0CAA0B;;;;;;0CAC1C,sUAAC;gCACC,SAAS,IAAM,aAAa,CAAC;gCAC7B,WAAW,IAAA,+HAAE,EACX,8DACA,YAAY,iDAAiD;0CAG/D,cAAA,sUAAC;oCACC,WAAW,IAAA,+HAAE,EACX,mFACA,YAAY,WAAW;;;;;;;;;;;;;;;;;;;;;;;0BAQjC,sUAAC;gBACC,WAAW,IAAA,+HAAE,EACX,mFACA,YAAY,8BAA8B;;kCAG5C,sUAAC,kJAAM;wBACL,SAAQ;wBACR,WAAU;wBACV,SAAS;kCACV;;;;;;kCAGD,sUAAC,kJAAM;wBACL,WAAW,IAAA,+HAAE,EACX,6EACA,UACE;wBAEJ,SAAS;wBACT,UAAU,CAAC,MAAM,IAAI,MAAO,UAAU,eAAe,gBAAgB,WAAW,SAAS,MAAM,KAAK;kCAEnG,uBACC;;8CACE,sUAAC,iTAAM;oCAAC,WAAU;;;;;;gCAAiB;;yDAIrC;;8CACE,sUAAC,2SAAI;oCAAC,WAAU;;;;;;gCAAiB;;;;;;;;;;;;;;;;;;;;AAQ/C;GAnWgB;;QACe,mJAAO;;;KADtB"}},
    {"offset": {"line": 4642, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/plan-editor.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { useTodo } from \"@/context/todo-context\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { NumberStepper } from \"@/components/ui/number-stepper\"\nimport { CategoryInput } from \"@/components/ui/category-input\"\nimport { AnimatedField } from \"@/components/ui/animated-field\"\nimport { RepeatToggle } from \"@/components/ui/repeat-toggle\"\nimport { X, Trash2, Repeat, CheckCircle2 } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { WEEK_DAYS, MONTH_DAYS } from \"@/lib/constants\"\n\ninterface PlanEditorProps {\n  planId: string\n  onClose: () => void\n}\n\nexport function PlanEditor({ planId, onClose }: PlanEditorProps) {\n  const { plans, updatePlan, deletePlan, completePlanOnce, endPlan } = useTodo()\n  const plan = plans.find((p) => p.id === planId)\n  const prevPlanIdRef = useRef(planId)\n\n  const [title, setTitle] = useState(\"\")\n  const [description, setDescription] = useState(\"\")\n  const [repeatCycle, setRepeatCycle] = useState<\"daily\" | \"weekly\" | \"monthly\">(\"weekly\")\n  const [planDays, setPlanDays] = useState<number[]>([])\n  const [startTime, setStartTime] = useState(\"20:00\")\n  const [endTime, setEndTime] = useState(\"21:00\")\n  const [isRepeating, setIsRepeating] = useState(false)\n  const [repeatCount, setRepeatCount] = useState<string>(\"\")\n  const [cycleTargetCount, setCycleTargetCount] = useState<string>(\"1\")\n  const [category, setCategory] = useState(\"生活\")\n  const [isContentVisible, setIsContentVisible] = useState(false)\n\n  useEffect(() => {\n    if (plan) {\n      setTitle(plan.title)\n      setDescription(plan.description)\n      setRepeatCycle(plan.repeatCycle)\n      setPlanDays(plan.planDays)\n      setStartTime(plan.startTime)\n      setEndTime(plan.endTime)\n      setIsRepeating(plan.repeatCount === null || plan.repeatCount > 1)\n      setRepeatCount(plan.repeatCount?.toString() || \"\")\n      setCycleTargetCount(plan.cycleTargetCount?.toString() || \"1\")\n      setCategory(plan.category)\n    }\n  }, [plan])\n\n  useEffect(() => {\n    if (prevPlanIdRef.current !== planId) {\n      setIsContentVisible(false)\n      prevPlanIdRef.current = planId\n      requestAnimationFrame(() => {\n        requestAnimationFrame(() => setIsContentVisible(true))\n      })\n    }\n  }, [planId])\n\n  useEffect(() => {\n    requestAnimationFrame(() => setTimeout(() => setIsContentVisible(true), 50))\n  }, [])\n\n  if (!plan) return null\n\n  const isPlanEnded = !plan.active && plan.repeatCount && plan.totalCompletedCount >= plan.repeatCount\n  const isCycleCompleted = plan.currentCount >= plan.cycleTargetCount\n\n  const toggleDay = (day: number) => {\n    const newDays = planDays.includes(day)\n      ? planDays.filter((d) => d !== day)\n      : [...planDays, day].sort((a, b) => a - b)\n    setPlanDays(newDays)\n    updatePlan(planId, { planDays: newDays })\n  }\n\n  const handleDelete = () => {\n    deletePlan(planId)\n    onClose()\n  }\n\n  const handleCategoryChange = (value: string) => {\n    setCategory(value)\n    updatePlan(planId, { category: value })\n  }\n\n  const handleCycleTargetChange = (value: string) => {\n    setCycleTargetCount(value)\n    updatePlan(planId, { cycleTargetCount: value ? Number.parseInt(value) : 1 })\n  }\n\n  const handleRepeatCountChange = (value: string) => {\n    setRepeatCount(value)\n    updatePlan(planId, { repeatCount: value ? Number.parseInt(value) : null })\n  }\n\n  const handleRepeatingChange = (value: boolean) => {\n    setIsRepeating(value)\n    if (!value) {\n      setRepeatCount(\"1\")\n      updatePlan(planId, { repeatCount: 1 })\n    } else {\n      setRepeatCount(\"\")\n      updatePlan(planId, { repeatCount: null })\n    }\n  }\n\n  return (\n    <div className=\"w-96 h-full border-l border-border bg-card flex flex-col shadow-2xl\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-border flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <div\n            className={cn(\n              \"w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300\",\n              isPlanEnded ? \"bg-green-500/20\" : isCycleCompleted ? \"bg-emerald-500/20\" : \"bg-violet-500/20\",\n            )}\n          >\n            {isPlanEnded || isCycleCompleted ? (\n              <CheckCircle2 className={cn(\"w-4 h-4\", isPlanEnded ? \"text-green-400\" : \"text-emerald-400\")} />\n            ) : (\n              <Repeat className=\"w-4 h-4 text-violet-400\" />\n            )}\n          </div>\n          <h3 className=\"font-semibold text-foreground\">\n            {isPlanEnded ? \"已完成的计划\" : isCycleCompleted ? \"本周期已完成\" : \"编辑计划\"}\n          </h3>\n        </div>\n        <Button variant=\"ghost\" size=\"icon\" onClick={onClose} className=\"hover:rotate-90 transition-all duration-200\">\n          <X className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* Form */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {/* 进度条 */}\n        <AnimatedField delay={50} isVisible={isContentVisible}>\n          <div\n            className={cn(\n              \"p-3 rounded-lg border\",\n              isPlanEnded\n                ? \"bg-green-500/10 border-green-500/30\"\n                : isCycleCompleted\n                  ? \"bg-emerald-500/10 border-emerald-500/30\"\n                  : \"bg-violet-500/10 border-violet-500/30\",\n            )}\n          >\n            <div className=\"flex items-center justify-between mb-2\">\n              <span className=\"text-sm text-muted-foreground\">本周期进度</span>\n              <span className={cn(\"text-sm font-medium\", isCycleCompleted ? \"text-emerald-400\" : \"text-violet-400\")}>\n                {plan.currentCount} / {plan.cycleTargetCount} 次\n              </span>\n            </div>\n            <div className=\"h-2 bg-muted rounded-full overflow-hidden mb-3\">\n              <div\n                className={cn(\n                  \"h-full transition-all duration-300\",\n                  isCycleCompleted ? \"bg-emerald-500\" : \"bg-violet-500\",\n                )}\n                style={{ width: `${Math.min((plan.currentCount / plan.cycleTargetCount) * 100, 100)}%` }}\n              />\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-muted-foreground\">总完成次数</span>\n              <span className={cn(\"text-sm font-medium\", isPlanEnded ? \"text-green-400\" : \"text-violet-400\")}>\n                {plan.totalCompletedCount} 次{plan.repeatCount && ` / ${plan.repeatCount} 次`}\n              </span>\n            </div>\n            {plan.repeatCount && (\n              <div className=\"mt-2 h-2 bg-muted rounded-full overflow-hidden\">\n                <div\n                  className={cn(\"h-full transition-all duration-300\", isPlanEnded ? \"bg-green-500\" : \"bg-violet-500\")}\n                  style={{ width: `${Math.min((plan.totalCompletedCount / plan.repeatCount) * 100, 100)}%` }}\n                />\n              </div>\n            )}\n          </div>\n        </AnimatedField>\n\n        {/* 重复开关 */}\n        <AnimatedField delay={250} isVisible={isContentVisible}>\n          <RepeatToggle\n            isRepeating={isRepeating}\n            onToggle={() => handleRepeatingChange(!isRepeating)}\n            disabled={!!isPlanEnded}\n          />\n        </AnimatedField>\n\n        <div\n          className={cn(\n            \"space-y-4 transition-all duration-500 ease-out overflow-hidden\",\n            isRepeating ? \"max-h-[250px] opacity-100\" : \"max-h-0 opacity-0\",\n          )}\n        >\n          <AnimatedField delay={275} isVisible={isContentVisible && isRepeating}>\n            <Label>重复周期</Label>\n            <Select\n              value={repeatCycle}\n              onValueChange={(v: \"daily\" | \"weekly\" | \"monthly\") => {\n                setRepeatCycle(v)\n                updatePlan(planId, { repeatCycle: v })\n              }}\n              disabled={!!isPlanEnded}\n            >\n              <SelectTrigger className=\"bg-input\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"daily\">每天</SelectItem>\n                <SelectItem value=\"weekly\">每周</SelectItem>\n                <SelectItem value=\"monthly\">每月</SelectItem>\n              </SelectContent>\n            </Select>\n          </AnimatedField>\n\n          <AnimatedField delay={300} isVisible={isContentVisible && isRepeating}>\n            <Label>总重复次数（留空为无限）</Label>\n            <NumberStepper\n              value={repeatCount}\n              onChange={handleRepeatCountChange}\n              min={1}\n              max={999}\n              placeholder=\"无限\"\n              allowEmpty\n              disabled={!!isPlanEnded}\n            />\n          </AnimatedField>\n        </div>\n\n        {/* 计划日 - 只在开启重复且不是每天时显示 */}\n        {isRepeating && repeatCycle !== \"daily\" && (\n          <AnimatedField delay={325} isVisible={isContentVisible}>\n            <Label>计划日</Label>\n            <div className=\"flex flex-wrap gap-2\">\n              {(repeatCycle === \"weekly\" ? WEEK_DAYS : MONTH_DAYS).map((day) => (\n                <button\n                  key={day.value}\n                  type=\"button\"\n                  onClick={() => !isPlanEnded && toggleDay(day.value)}\n                  disabled={!!isPlanEnded}\n                  className={cn(\n                    \"px-3 py-1.5 text-sm rounded-md border transition-all duration-200\",\n                    planDays.includes(day.value)\n                      ? \"bg-violet-500 border-violet-500 text-white\"\n                      : \"border-border hover:border-violet-500/50\",\n                    isPlanEnded && \"opacity-50 cursor-not-allowed\",\n                  )}\n                >\n                  {day.label}\n                </button>\n              ))}\n            </div>\n          </AnimatedField>\n        )}\n\n        {/* 时间 */}\n        <AnimatedField delay={350} isVisible={isContentVisible}>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label>开始时间</Label>\n              <Input\n                type=\"time\"\n                value={startTime}\n                onChange={(e) => {\n                  setStartTime(e.target.value)\n                  updatePlan(planId, { startTime: e.target.value })\n                }}\n                className=\"bg-input\"\n                disabled={!!isPlanEnded}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>结束时间</Label>\n              <Input\n                type=\"time\"\n                value={endTime}\n                onChange={(e) => {\n                  setEndTime(e.target.value)\n                  updatePlan(planId, { endTime: e.target.value })\n                }}\n                className=\"bg-input\"\n                disabled={!!isPlanEnded}\n              />\n            </div>\n          </div>\n        </AnimatedField>\n\n        {/* 每周期目标次数 */}\n        <AnimatedField delay={375} isVisible={isContentVisible}>\n          <Label>每周期目标次数</Label>\n          <NumberStepper\n            value={cycleTargetCount}\n            onChange={handleCycleTargetChange}\n            min={1}\n            max={99}\n            placeholder=\"1\"\n            disabled={!!isPlanEnded}\n          />\n          <p className=\"text-xs text-muted-foreground mt-1\">达到目标次数后，本周期计划自动完成</p>\n        </AnimatedField>\n\n        {/* 分类 */}\n        <AnimatedField delay={400} isVisible={isContentVisible}>\n          <Label>分类</Label>\n          <CategoryInput value={category} onChange={handleCategoryChange} disabled={!!isPlanEnded} />\n        </AnimatedField>\n      </div>\n\n      {/* Footer */}\n      <AnimatedField delay={450} isVisible={isContentVisible} className=\"p-4 border-t border-border\">\n        <Button\n          variant=\"destructive\"\n          className=\"w-full transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]\"\n          onClick={handleDelete}\n        >\n          <Trash2 className=\"w-4 h-4 mr-2\" />\n          删除计划\n        </Button>\n      </AnimatedField>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5335, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/history-view.tsx"],"sourcesContent":["\"use client\"\n\nimport { useTodo, type HistoryRecord } from \"@/context/todo-context\"\nimport { CheckCircle2, Plus, Repeat, Clock } from \"lucide-react\"\nimport { useMemo } from \"react\"\nimport { formatDateLabel } from \"@/lib/utils/date\"\n\nconst HISTORY_CONFIG = {\n  todo_created: { icon: Plus, color: \"text-blue-400 bg-blue-500/10\", label: \"创建任务\" },\n  todo_completed: { icon: CheckCircle2, color: \"text-green-400 bg-green-500/10\", label: \"完成任务\" },\n  plan_created: { icon: Repeat, color: \"text-violet-400 bg-violet-500/10\", label: \"创建计划\" },\n  plan_completed: { icon: CheckCircle2, color: \"text-violet-400 bg-violet-500/10\", label: \"完成计划\" },\n} as const\n\nfunction formatRelativeTime(timestamp: string) {\n  const date = new Date(timestamp)\n  const diffMs = Date.now() - date.getTime()\n  const diffMins = Math.floor(diffMs / 60000)\n  const diffHours = Math.floor(diffMs / 3600000)\n  const diffDays = Math.floor(diffMs / 86400000)\n\n  if (diffMins < 1) return \"刚刚\"\n  if (diffMins < 60) return `${diffMins}分钟前`\n  if (diffHours < 24) return `${diffHours}小时前`\n  if (diffDays < 7) return `${diffDays}天前`\n\n  return date.toLocaleDateString(\"zh-CN\", { month: \"short\", day: \"numeric\", hour: \"2-digit\", minute: \"2-digit\" })\n}\n\nfunction groupHistoryByDate(history: HistoryRecord[]) {\n  const dateMap = new Map<string, HistoryRecord[]>()\n\n  history.forEach((record) => {\n    const dateKey = record.timestamp.split(\"T\")[0]\n    if (!dateMap.has(dateKey)) dateMap.set(dateKey, [])\n    dateMap.get(dateKey)!.push(record)\n  })\n\n  return Array.from(dateMap.entries())\n    .sort(([a], [b]) => b.localeCompare(a))\n    .map(([date, records]) => ({ date, label: formatDateLabel(date), records }))\n}\n\nexport function HistoryView() {\n  const { history } = useTodo()\n  const groupedHistory = useMemo(() => groupHistoryByDate(history), [history])\n\n  return (\n    <div className=\"flex-1 flex flex-col bg-background\">\n      <header className=\"p-6 border-b border-border\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h2 className=\"text-2xl font-semibold text-foreground\">历程</h2>\n          <span className=\"text-sm text-muted-foreground\">{history.length} 条记录</span>\n        </div>\n        <p className=\"text-sm text-muted-foreground\">查看最近的任务和计划活动</p>\n      </header>\n\n      <div className=\"flex-1 overflow-y-auto p-4\">\n        {history.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center h-full text-muted-foreground\">\n            <Clock className=\"w-12 h-12 mb-3 opacity-50\" />\n            <p className=\"text-lg\">暂无历程记录</p>\n            <p className=\"text-sm\">开始创建和完成任务后将在此显示</p>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {groupedHistory.map((group, groupIndex) => (\n              <div\n                key={group.date}\n                className=\"animate-in fade-in slide-in-from-left-2 duration-300\"\n                style={{ animationDelay: `${groupIndex * 100}ms` }}\n              >\n                <div className=\"flex items-center gap-3 mb-3\">\n                  <h3 className=\"text-sm font-medium text-foreground\">{group.label}</h3>\n                  <div className=\"flex-1 h-px bg-border\" />\n                </div>\n\n                <div className=\"space-y-2\">\n                  {group.records.map((record, recordIndex) => {\n                    const config = HISTORY_CONFIG[record.type]\n                    const Icon = config.icon\n\n                    return (\n                      <div\n                        key={record.id}\n                        className=\"flex items-start gap-3 p-3 rounded-lg bg-card border border-border hover:border-primary/30 hover:bg-card/80 transition-all duration-200\"\n                        style={{ animationDelay: `${groupIndex * 100 + recordIndex * 50}ms` }}\n                      >\n                        <div\n                          className={`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${config.color}`}\n                        >\n                          <Icon className=\"w-5 h-5\" />\n                        </div>\n\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-start justify-between gap-2\">\n                            <div className=\"flex-1 min-w-0\">\n                              <p className=\"text-sm font-medium text-foreground truncate\">{record.title}</p>\n                              <p className=\"text-xs text-muted-foreground mt-0.5\">{config.label}</p>\n                            </div>\n                            <span className=\"text-xs text-muted-foreground whitespace-nowrap\">\n                              {formatRelativeTime(record.timestamp)}\n                            </span>\n                          </div>\n\n                          <div className=\"flex items-center gap-2 mt-2\">\n                            {record.itemType === \"plan\" ? (\n                              <span className=\"text-xs px-2 py-0.5 rounded-full bg-violet-500/20 text-violet-400 flex items-center gap-1\">\n                                <Repeat className=\"w-3 h-3\" />\n                                计划\n                              </span>\n                            ) : (\n                              <span className=\"text-xs px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-400\">\n                                任务\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    )\n                  })}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5684, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/ui/switch.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SwitchPrimitive from '@radix-ui/react-switch'\n\nimport { cn } from '@/lib/utils'\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        'peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={\n          'bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0'\n        }\n      />\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,sUAAC,oSAAoB;QACnB,aAAU;QACV,WAAW,IAAA,+HAAE,EACX,6WACA;QAED,GAAG,KAAK;kBAET,cAAA,sUAAC,qSAAqB;YACpB,aAAU;YACV,WACE;;;;;;;;;;;AAKV;KArBS"}},
    {"offset": {"line": 5725, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/settings.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useEffect } from \"react\"\nimport { useTodo } from \"@/context/todo-context\"\nimport { Label } from \"@/components/ui/label\"\nimport { Switch } from \"@/components/ui/switch\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { Eye, ArrowUpDown, Bell, Volume2, Info, ArrowLeft } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface SettingsProps {\n  onBack?: () => void\n}\n\nconst SORT_OPTIONS = [\n  { value: \"date\", label: \"按日期\" },\n  { value: \"priority\", label: \"按优先级\" },\n  { value: \"name\", label: \"按名称\" },\n]\n\nexport function Settings({ onBack }: SettingsProps) {\n  const { settings, updateSettings } = useTodo()\n  const [isVisible, setIsVisible] = useState(false)\n\n  useEffect(() => {\n    requestAnimationFrame(() => setIsVisible(true))\n  }, [])\n\n  const settingSections = [\n    {\n      title: \"显示设置\",\n      items: [\n        {\n          icon: Eye,\n          label: \"显示已完成任务\",\n          description: \"在任务列表中显示已完成的任务\",\n          type: \"switch\" as const,\n          value: settings.showCompleted,\n          onChange: (v: boolean) => updateSettings({ showCompleted: v }),\n        },\n        {\n          icon: ArrowUpDown,\n          label: \"默认排序方式\",\n          description: \"选择任务的默认排序方式\",\n          type: \"select\" as const,\n          value: settings.sortBy,\n          options: SORT_OPTIONS,\n          onChange: (v: string) => updateSettings({ sortBy: v as \"date\" | \"priority\" | \"name\" }),\n        },\n      ],\n    },\n    {\n      title: \"通知设置\",\n      items: [\n        {\n          icon: Bell,\n          label: \"启用通知\",\n          description: \"接收任务到期提醒通知\",\n          type: \"switch\" as const,\n          value: settings.notifications,\n          onChange: (v: boolean) => updateSettings({ notifications: v }),\n        },\n        {\n          icon: Volume2,\n          label: \"声音提示\",\n          description: \"任务完成时播放提示音\",\n          type: \"switch\" as const,\n          value: settings.soundEnabled,\n          onChange: (v: boolean) => updateSettings({ soundEnabled: v }),\n        },\n      ],\n    },\n  ]\n\n  let itemIndex = 0\n\n  return (\n    <div className=\"flex-1 bg-background overflow-y-auto\">\n      <div className=\"max-w-2xl mx-auto p-6\">\n        {/* Header */}\n        <div\n          className={cn(\n            \"flex items-center gap-4 mb-6 transition-all duration-300\",\n            isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 -translate-y-4\",\n          )}\n        >\n          {onBack && (\n            <button\n              onClick={onBack}\n              className=\"p-2 rounded-lg hover:bg-muted transition-all duration-200 hover:-translate-x-1\"\n            >\n              <ArrowLeft className=\"w-5 h-5 text-muted-foreground\" />\n            </button>\n          )}\n          <h2 className=\"text-2xl font-semibold text-foreground\">设置</h2>\n        </div>\n\n        <div className=\"space-y-8\">\n          {settingSections.map((section, sectionIndex) => (\n            <SettingSection\n              key={section.title}\n              title={section.title}\n              isVisible={isVisible}\n              delay={50 + sectionIndex * 100}\n            >\n              {section.items.map((item) => {\n                const currentIndex = itemIndex++\n                return (\n                  <SettingItem\n                    key={item.label}\n                    icon={item.icon}\n                    label={item.label}\n                    description={item.description}\n                    isVisible={isVisible}\n                    delay={100 + currentIndex * 75}\n                  >\n                    {item.type === \"switch\" && (\n                      <Switch\n                        checked={item.value as boolean}\n                        onCheckedChange={item.onChange as (v: boolean) => void}\n                        className=\"transition-transform duration-200 hover:scale-105\"\n                      />\n                    )}\n                    {item.type === \"select\" && (\n                      <Select value={item.value as string} onValueChange={item.onChange as (v: string) => void}>\n                        <SelectTrigger className=\"w-32 bg-input border-border transition-all duration-200 hover:scale-[1.02]\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {item.options?.map((opt) => (\n                            <SelectItem key={opt.value} value={opt.value}>\n                              {opt.label}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    )}\n                  </SettingItem>\n                )\n              })}\n            </SettingSection>\n          ))}\n\n          {/* About Section */}\n          <SettingSection title=\"关于\" isVisible={isVisible} delay={350}>\n            <SettingItem\n              icon={Info}\n              label=\"Todo List v1.0\"\n              description=\"Windows风格任务管理应用\"\n              isVisible={isVisible}\n              delay={400}\n              iconClassName=\"bg-primary/20 text-primary\"\n            />\n          </SettingSection>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SettingSection({\n  title,\n  isVisible,\n  delay,\n  children,\n}: { title: string; isVisible: boolean; delay: number; children: React.ReactNode }) {\n  return (\n    <div>\n      <h3\n        className={cn(\n          \"text-sm font-medium text-muted-foreground mb-4 transition-all duration-300\",\n          isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-2\",\n        )}\n        style={{ transitionDelay: `${delay}ms` }}\n      >\n        {title}\n      </h3>\n      <div className=\"space-y-2\">{children}</div>\n    </div>\n  )\n}\n\nfunction SettingItem({\n  icon: Icon,\n  label,\n  description,\n  isVisible,\n  delay,\n  iconClassName,\n  children,\n}: {\n  icon: React.ElementType\n  label: string\n  description: string\n  isVisible: boolean\n  delay: number\n  iconClassName?: string\n  children?: React.ReactNode\n}) {\n  return (\n    <div\n      className={cn(\n        \"flex items-center justify-between p-4 rounded-lg bg-card border border-border transition-all duration-300 hover:bg-card/80 hover:scale-[1.01]\",\n        isVisible ? \"opacity-100 translate-y-0\" : \"opacity-0 translate-y-4\",\n      )}\n      style={{ transitionDelay: `${delay}ms` }}\n    >\n      <div className=\"flex items-center gap-4\">\n        <div className={cn(\"w-10 h-10 rounded-lg bg-muted flex items-center justify-center\", iconClassName)}>\n          <Icon className=\"w-5 h-5 text-muted-foreground\" />\n        </div>\n        <div>\n          <Label className=\"text-card-foreground\">{label}</Label>\n          <p className=\"text-sm text-muted-foreground\">{description}</p>\n        </div>\n      </div>\n      {children}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6090, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/components/window-controls.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { getCurrentWindow } from \"@tauri-apps/api/window\"\nimport { Pin, Minimize2, Maximize2, Square, X } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface WindowControlsProps {\n  className?: string\n}\n\nexport function WindowControls({ className }: WindowControlsProps) {\n  const [isPinned, setIsPinned] = useState(false)\n  const [isMaximized, setIsMaximized] = useState(false)\n\n  return (\n    <div className={cn(\"flex items-center gap-0.5 no-drag\", className)}>\n      {/* 置顶按钮 */}\n      <button\n        onClick={async () => {\n          const win = getCurrentWindow()\n          const next = !isPinned\n          setIsPinned(next)\n          await win.setAlwaysOnTop(next)\n        }}\n        className={cn(\n          \"group relative flex items-center justify-center w-11 h-9\",\n          \"transition-all duration-200 ease-out\",\n          \"hover:bg-secondary/80\",\n          isPinned && \"bg-primary/20\",\n        )}\n        title={isPinned ? \"取消置顶\" : \"置顶窗口\"}\n      >\n        <Pin\n          className={cn(\n            \"w-4 h-4 transition-all duration-200\",\n            \"text-muted-foreground group-hover:text-foreground\",\n            isPinned && \"text-primary rotate-45\",\n          )}\n        />\n        {isPinned && <span className=\"absolute bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-primary\" />}\n      </button>\n\n      {/* 最小化按钮 */}\n      <button\n        onClick={async () => {\n          const win = getCurrentWindow()\n          await win.minimize()\n        }}\n        className={cn(\n          \"group flex items-center justify-center w-11 h-9\",\n          \"transition-all duration-200 ease-out\",\n          \"hover:bg-secondary/80\",\n        )}\n        title=\"最小化\"\n      >\n        <Minimize2\n          className={cn(\n            \"w-4 h-4 transition-all duration-200\",\n            \"text-muted-foreground group-hover:text-foreground group-hover:scale-90\",\n          )}\n        />\n      </button>\n\n      {/* 最大化/还原按钮 */}\n      <button\n        onClick={async () => {\n          const win = getCurrentWindow()\n          await win.toggleMaximize()\n          setIsMaximized(!isMaximized)\n        }}\n        className={cn(\n          \"group flex items-center justify-center w-11 h-9\",\n          \"transition-all duration-200 ease-out\",\n          \"hover:bg-secondary/80\",\n        )}\n        title={isMaximized ? \"还原窗口\" : \"最大化\"}\n      >\n        {isMaximized ? (\n          <Square\n            className={cn(\n              \"w-3.5 h-3.5 transition-all duration-200\",\n              \"text-muted-foreground group-hover:text-foreground group-hover:scale-110\",\n            )}\n          />\n        ) : (\n          <Maximize2\n            className={cn(\n              \"w-4 h-4 transition-all duration-200\",\n              \"text-muted-foreground group-hover:text-foreground group-hover:scale-110\",\n            )}\n          />\n        )}\n      </button>\n\n      {/* 关闭按钮 */}\n      <button\n        onClick={async () => {\n          const win = getCurrentWindow()\n          await win.close()\n        }}\n        className={cn(\n          \"group flex items-center justify-center w-11 h-9\",\n          \"transition-all duration-200 ease-out\",\n          \"hover:bg-destructive\",\n        )}\n        title=\"关闭\"\n      >\n        <X\n          className={cn(\n            \"w-4 h-4 transition-all duration-200\",\n            \"text-muted-foreground group-hover:text-white group-hover:scale-110\",\n          )}\n        />\n      </button>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;AALA;;;;;AAWO,SAAS,eAAe,EAAE,SAAS,EAAuB;;IAC/D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,kTAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,kTAAQ,EAAC;IAE/C,qBACE,sUAAC;QAAI,WAAW,IAAA,+HAAE,EAAC,qCAAqC;;0BAEtD,sUAAC;gBACC,SAAS;oBACP,MAAM,MAAM,IAAA,oQAAgB;oBAC5B,MAAM,OAAO,CAAC;oBACd,YAAY;oBACZ,MAAM,IAAI,cAAc,CAAC;gBAC3B;gBACA,WAAW,IAAA,+HAAE,EACX,4DACA,wCACA,yBACA,YAAY;gBAEd,OAAO,WAAW,SAAS;;kCAE3B,sUAAC,wSAAG;wBACF,WAAW,IAAA,+HAAE,EACX,uCACA,qDACA,YAAY;;;;;;oBAGf,0BAAY,sUAAC;wBAAK,WAAU;;;;;;;;;;;;0BAI/B,sUAAC;gBACC,SAAS;oBACP,MAAM,MAAM,IAAA,oQAAgB;oBAC5B,MAAM,IAAI,QAAQ;gBACpB;gBACA,WAAW,IAAA,+HAAE,EACX,mDACA,wCACA;gBAEF,OAAM;0BAEN,cAAA,sUAAC,8TAAS;oBACR,WAAW,IAAA,+HAAE,EACX,uCACA;;;;;;;;;;;0BAMN,sUAAC;gBACC,SAAS;oBACP,MAAM,MAAM,IAAA,oQAAgB;oBAC5B,MAAM,IAAI,cAAc;oBACxB,eAAe,CAAC;gBAClB;gBACA,WAAW,IAAA,+HAAE,EACX,mDACA,wCACA;gBAEF,OAAO,cAAc,SAAS;0BAE7B,4BACC,sUAAC,iTAAM;oBACL,WAAW,IAAA,+HAAE,EACX,2CACA;;;;;yCAIJ,sUAAC,8TAAS;oBACR,WAAW,IAAA,+HAAE,EACX,uCACA;;;;;;;;;;;0BAOR,sUAAC;gBACC,SAAS;oBACP,MAAM,MAAM,IAAA,oQAAgB;oBAC5B,MAAM,IAAI,KAAK;gBACjB;gBACA,WAAW,IAAA,+HAAE,EACX,mDACA,wCACA;gBAEF,OAAM;0BAEN,cAAA,sUAAC,kSAAC;oBACA,WAAW,IAAA,+HAAE,EACX,uCACA;;;;;;;;;;;;;;;;;AAMZ;GA1GgB;KAAA"}},
    {"offset": {"line": 6229, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/pRism/AppData/Local/Microsoft/WindowsApps/ezTodo/otherP/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef } from \"react\"\nimport { getCurrentWindow } from \"@tauri-apps/api/window\"\nimport { Sidebar } from \"@/components/sidebar\"\nimport { TodoList } from \"@/components/todo-list\"\nimport { TodoEditor } from \"@/components/todo-editor\"\nimport { TodoCreator } from \"@/components/todo-creator\"\nimport { PlanEditor } from \"@/components/plan-editor\"\nimport { HistoryView } from \"@/components/history-view\"\nimport { Settings } from \"@/components/settings\"\nimport { WindowControls } from \"@/components/window-controls\"\nimport { TodoProvider } from \"@/context/todo-context\"\n\nexport type View = \"list\" | \"important\" | \"completed\" | \"history\" | \"settings\"\n\ntype EditorType = \"todo\" | \"plan\" | \"create\" | null\n\nexport default function Home() {\n  const [currentView, setCurrentView] = useState<View>(\"list\")\n  const [editingTodoId, setEditingTodoId] = useState<string | null>(null)\n  const [editingPlanId, setEditingPlanId] = useState<string | null>(null)\n  const [isCreating, setIsCreating] = useState(false)\n  const [editorType, setEditorType] = useState<EditorType>(null)\n  const [isTransitioning, setIsTransitioning] = useState(false)\n  const [isClosing, setIsClosing] = useState(false)\n  const [closingContent, setClosingContent] = useState<{\n    type: EditorType\n    todoId: string | null\n    planId: string | null\n  } | null>(null)\n  const previousViewRef = useRef<View>(\"list\")\n\n  const handleViewChange = (view: View) => {\n    if (view === \"settings\") {\n      if (currentView === \"settings\") {\n        setCurrentView(previousViewRef.current)\n        return\n      }\n      previousViewRef.current = currentView\n    }\n    setCurrentView(view)\n    if (editingTodoId || editingPlanId || isCreating) {\n      setClosingContent({ type: editorType, todoId: editingTodoId, planId: editingPlanId })\n      setIsClosing(true)\n      setEditingTodoId(null)\n      setEditingPlanId(null)\n      setIsCreating(false)\n      setEditorType(null)\n      setTimeout(() => {\n        setIsClosing(false)\n        setClosingContent(null)\n      }, 200)\n    }\n  }\n\n  const closePanel = () => {\n    if (isClosing) return\n    setClosingContent({ type: editorType, todoId: editingTodoId, planId: editingPlanId })\n    setIsClosing(true)\n    setEditingTodoId(null)\n    setEditingPlanId(null)\n    setIsCreating(false)\n    setEditorType(null)\n    setTimeout(() => {\n      setIsClosing(false)\n      setClosingContent(null)\n    }, 200)\n  }\n\n  const handleEditTodo = (id: string) => {\n    if (editingTodoId === id && editorType === \"todo\") {\n      closePanel()\n      return\n    }\n\n    if (editorType === \"plan\" || editorType === \"create\") {\n      setIsTransitioning(true)\n      setTimeout(() => {\n        setIsCreating(false)\n        setEditingPlanId(null)\n        setEditingTodoId(id)\n        setEditorType(\"todo\")\n        setIsTransitioning(false)\n      }, 150)\n    } else {\n      setIsCreating(false)\n      setEditingPlanId(null)\n      setEditingTodoId(id)\n      setEditorType(\"todo\")\n    }\n  }\n\n  const handleEditPlan = (id: string) => {\n    if (editingPlanId === id && editorType === \"plan\") {\n      closePanel()\n      return\n    }\n\n    if (editorType === \"todo\" || editorType === \"create\") {\n      setIsTransitioning(true)\n      setTimeout(() => {\n        setIsCreating(false)\n        setEditingTodoId(null)\n        setEditingPlanId(id)\n        setEditorType(\"plan\")\n        setIsTransitioning(false)\n      }, 150)\n    } else {\n      setIsCreating(false)\n      setEditingTodoId(null)\n      setEditingPlanId(id)\n      setEditorType(\"plan\")\n    }\n  }\n\n  const handleToggleCreate = () => {\n    if (isCreating) {\n      closePanel()\n    } else {\n      if (editorType === \"todo\" || editorType === \"plan\") {\n        setIsTransitioning(true)\n        setTimeout(() => {\n          setEditingTodoId(null)\n          setEditingPlanId(null)\n          setIsCreating(true)\n          setEditorType(\"create\")\n          setIsTransitioning(false)\n        }, 150)\n      } else {\n        setEditingTodoId(null)\n        setEditingPlanId(null)\n        setIsCreating(true)\n        setEditorType(\"create\")\n      }\n    }\n  }\n\n  const handleClosePanel = () => {\n    closePanel()\n  }\n\n  const showRightPanel = editingTodoId || editingPlanId || isCreating || isClosing\n\n  const renderPanelContent = () => {\n    if (isClosing && closingContent) {\n      if (closingContent.type === \"todo\" && closingContent.todoId) {\n        return <TodoEditor todoId={closingContent.todoId} onClose={handleClosePanel} />\n      }\n      if (closingContent.type === \"plan\" && closingContent.planId) {\n        return <PlanEditor planId={closingContent.planId} onClose={handleClosePanel} />\n      }\n      if (closingContent.type === \"create\") {\n        return <TodoCreator view={currentView} onClose={handleClosePanel} />\n      }\n    }\n    if (editingTodoId) {\n      return <TodoEditor todoId={editingTodoId} onClose={handleClosePanel} />\n    }\n    if (editingPlanId) {\n      return <PlanEditor planId={editingPlanId} onClose={handleClosePanel} />\n    }\n    if (isCreating) {\n      return <TodoCreator view={currentView} onClose={handleClosePanel} />\n    }\n    return null\n  }\n\n  return (\n    <TodoProvider>\n      <div className=\"flex h-screen bg-background relative\">\n        <div\n          className=\"fixed top-0 left-0 right-0 h-9 z-40 titlebar\"\n          onDoubleClick={async () => {\n            const win = getCurrentWindow()\n            await win.toggleMaximize()\n          }}\n          onMouseDown={async (e) => {\n            if (e.button !== 0) return\n            const win = getCurrentWindow()\n            await win.startDragging()\n          }}\n        />\n        <div className=\"absolute top-0 right-0 z-50 no-drag\">\n          <WindowControls />\n        </div>\n\n        <Sidebar currentView={currentView} onViewChange={handleViewChange} />\n        <main className=\"flex-1 flex overflow-hidden relative\">\n          <div\n            className={`flex-1 flex transition-all duration-300 ease-out pt-6 relative z-30 ${\n              currentView === \"settings\" || currentView === \"history\"\n                ? \"opacity-0 -translate-x-4 pointer-events-none absolute inset-0\"\n                : \"opacity-100 translate-x-0\"\n            }`}\n          >\n            <TodoList\n              view={currentView}\n              onEditTodo={handleEditTodo}\n              onEditPlan={handleEditPlan}\n              editingTodoId={editingTodoId}\n              editingPlanId={editingPlanId}\n              onToggleCreate={handleToggleCreate}\n              isCreating={isCreating}\n            />\n          </div>\n\n          {showRightPanel && (\n            <>\n              <div\n                className={`fixed inset-0 bg-black/40 z-20 transition-opacity duration-200 cursor-pointer ${\n                  isClosing ? \"opacity-0\" : \"opacity-100 animate-in fade-in\"\n                }`}\n                onClick={handleClosePanel}\n              />\n              <div\n                className={`fixed right-0 top-0 bottom-0 z-50 transition-all duration-200 ease-out ${\n                  isClosing\n                    ? \"opacity-0 translate-x-8 scale-95\"\n                    : isTransitioning\n                      ? \"opacity-0 translate-x-4 scale-95\"\n                      : \"opacity-100 translate-x-0 scale-100 animate-in slide-in-from-right duration-300\"\n                }`}\n              >\n                {renderPanelContent()}\n              </div>\n            </>\n          )}\n\n          <div\n            className={`absolute inset-0 pt-6 transition-all duration-300 ease-out ${\n              currentView === \"history\" ? \"opacity-100 translate-x-0\" : \"opacity-0 translate-x-4 pointer-events-none\"\n            }`}\n          >\n            <HistoryView />\n          </div>\n\n          <div\n            className={`absolute inset-0 pt-6 transition-all duration-300 ease-out ${\n              currentView === \"settings\" ? \"opacity-100 translate-x-0\" : \"opacity-0 translate-x-4 pointer-events-none\"\n            }`}\n          >\n            <Settings onBack={() => setCurrentView(previousViewRef.current)} />\n          </div>\n        </main>\n      </div>\n    </TodoProvider>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAZA;;;;;;;;;;;;AAkBe,SAAS;;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,kTAAQ,EAAO;IACrD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,kTAAQ,EAAgB;IAClE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,kTAAQ,EAAgB;IAClE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kTAAQ,EAAC;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kTAAQ,EAAa;IACzD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,kTAAQ,EAAC;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kTAAQ,EAAC;IAC3C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,kTAAQ,EAI1C;IACV,MAAM,kBAAkB,IAAA,gTAAM,EAAO;IAErC,MAAM,mBAAmB,CAAC;QACxB,IAAI,SAAS,YAAY;YACvB,IAAI,gBAAgB,YAAY;gBAC9B,eAAe,gBAAgB,OAAO;gBACtC;YACF;YACA,gBAAgB,OAAO,GAAG;QAC5B;QACA,eAAe;QACf,IAAI,iBAAiB,iBAAiB,YAAY;YAChD,kBAAkB;gBAAE,MAAM;gBAAY,QAAQ;gBAAe,QAAQ;YAAc;YACnF,aAAa;YACb,iBAAiB;YACjB,iBAAiB;YACjB,cAAc;YACd,cAAc;YACd,WAAW;gBACT,aAAa;gBACb,kBAAkB;YACpB,GAAG;QACL;IACF;IAEA,MAAM,aAAa;QACjB,IAAI,WAAW;QACf,kBAAkB;YAAE,MAAM;YAAY,QAAQ;YAAe,QAAQ;QAAc;QACnF,aAAa;QACb,iBAAiB;QACjB,iBAAiB;QACjB,cAAc;QACd,cAAc;QACd,WAAW;YACT,aAAa;YACb,kBAAkB;QACpB,GAAG;IACL;IAEA,MAAM,iBAAiB,CAAC;QACtB,IAAI,kBAAkB,MAAM,eAAe,QAAQ;YACjD;YACA;QACF;QAEA,IAAI,eAAe,UAAU,eAAe,UAAU;YACpD,mBAAmB;YACnB,WAAW;gBACT,cAAc;gBACd,iBAAiB;gBACjB,iBAAiB;gBACjB,cAAc;gBACd,mBAAmB;YACrB,GAAG;QACL,OAAO;YACL,cAAc;YACd,iBAAiB;YACjB,iBAAiB;YACjB,cAAc;QAChB;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,IAAI,kBAAkB,MAAM,eAAe,QAAQ;YACjD;YACA;QACF;QAEA,IAAI,eAAe,UAAU,eAAe,UAAU;YACpD,mBAAmB;YACnB,WAAW;gBACT,cAAc;gBACd,iBAAiB;gBACjB,iBAAiB;gBACjB,cAAc;gBACd,mBAAmB;YACrB,GAAG;QACL,OAAO;YACL,cAAc;YACd,iBAAiB;YACjB,iBAAiB;YACjB,cAAc;QAChB;IACF;IAEA,MAAM,qBAAqB;QACzB,IAAI,YAAY;YACd;QACF,OAAO;YACL,IAAI,eAAe,UAAU,eAAe,QAAQ;gBAClD,mBAAmB;gBACnB,WAAW;oBACT,iBAAiB;oBACjB,iBAAiB;oBACjB,cAAc;oBACd,cAAc;oBACd,mBAAmB;gBACrB,GAAG;YACL,OAAO;gBACL,iBAAiB;gBACjB,iBAAiB;gBACjB,cAAc;gBACd,cAAc;YAChB;QACF;IACF;IAEA,MAAM,mBAAmB;QACvB;IACF;IAEA,MAAM,iBAAiB,iBAAiB,iBAAiB,cAAc;IAEvE,MAAM,qBAAqB;QACzB,IAAI,aAAa,gBAAgB;YAC/B,IAAI,eAAe,IAAI,KAAK,UAAU,eAAe,MAAM,EAAE;gBAC3D,qBAAO,sUAAC,wJAAU;oBAAC,QAAQ,eAAe,MAAM;oBAAE,SAAS;;;;;;YAC7D;YACA,IAAI,eAAe,IAAI,KAAK,UAAU,eAAe,MAAM,EAAE;gBAC3D,qBAAO,sUAAC,wJAAU;oBAAC,QAAQ,eAAe,MAAM;oBAAE,SAAS;;;;;;YAC7D;YACA,IAAI,eAAe,IAAI,KAAK,UAAU;gBACpC,qBAAO,sUAAC,0JAAW;oBAAC,MAAM;oBAAa,SAAS;;;;;;YAClD;QACF;QACA,IAAI,eAAe;YACjB,qBAAO,sUAAC,wJAAU;gBAAC,QAAQ;gBAAe,SAAS;;;;;;QACrD;QACA,IAAI,eAAe;YACjB,qBAAO,sUAAC,wJAAU;gBAAC,QAAQ;gBAAe,SAAS;;;;;;QACrD;QACA,IAAI,YAAY;YACd,qBAAO,sUAAC,0JAAW;gBAAC,MAAM;gBAAa,SAAS;;;;;;QAClD;QACA,OAAO;IACT;IAEA,qBACE,sUAAC,wJAAY;kBACX,cAAA,sUAAC;YAAI,WAAU;;8BACb,sUAAC;oBACC,WAAU;oBACV,eAAe;wBACb,MAAM,MAAM,IAAA,oQAAgB;wBAC5B,MAAM,IAAI,cAAc;oBAC1B;oBACA,aAAa,OAAO;wBAClB,IAAI,EAAE,MAAM,KAAK,GAAG;wBACpB,MAAM,MAAM,IAAA,oQAAgB;wBAC5B,MAAM,IAAI,aAAa;oBACzB;;;;;;8BAEF,sUAAC;oBAAI,WAAU;8BACb,cAAA,sUAAC,gKAAc;;;;;;;;;;8BAGjB,sUAAC,8IAAO;oBAAC,aAAa;oBAAa,cAAc;;;;;;8BACjD,sUAAC;oBAAK,WAAU;;sCACd,sUAAC;4BACC,WAAW,CAAC,oEAAoE,EAC9E,gBAAgB,cAAc,gBAAgB,YAC1C,kEACA,6BACJ;sCAEF,cAAA,sUAAC,oJAAQ;gCACP,MAAM;gCACN,YAAY;gCACZ,YAAY;gCACZ,eAAe;gCACf,eAAe;gCACf,gBAAgB;gCAChB,YAAY;;;;;;;;;;;wBAIf,gCACC;;8CACE,sUAAC;oCACC,WAAW,CAAC,8EAA8E,EACxF,YAAY,cAAc,kCAC1B;oCACF,SAAS;;;;;;8CAEX,sUAAC;oCACC,WAAW,CAAC,uEAAuE,EACjF,YACI,qCACA,kBACE,qCACA,mFACN;8CAED;;;;;;;;sCAKP,sUAAC;4BACC,WAAW,CAAC,2DAA2D,EACrE,gBAAgB,YAAY,8BAA8B,+CAC1D;sCAEF,cAAA,sUAAC,0JAAW;;;;;;;;;;sCAGd,sUAAC;4BACC,WAAW,CAAC,2DAA2D,EACrE,gBAAgB,aAAa,8BAA8B,+CAC3D;sCAEF,cAAA,sUAAC,gJAAQ;gCAAC,QAAQ,IAAM,eAAe,gBAAgB,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM1E;GAtOwB;KAAA"}}]
}